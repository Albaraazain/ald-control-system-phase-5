#!/usr/bin/env zsh
set -euo pipefail

SCRIPT_DIR="$(cd -- "$(dirname "$0")" >/dev/null 2>&1 ; pwd -P)"
PROMPT_FILE="$SCRIPT_DIR/../prompts/codexD.md"

if [[ ! -f "$PROMPT_FILE" ]]; then
  echo "[codexD] Prompt file not found: $PROMPT_FILE" 1>&2
  exit 1
fi

cat "$PROMPT_FILE"

if command -v pbcopy >/dev/null 2>&1; then
  command cat "$PROMPT_FILE" | pbcopy
  echo "\n[codexD] Prompt copied to clipboard via pbcopy." 1>&2
elif command -v xclip >/dev/null 2>&1; then
  command cat "$PROMPT_FILE" | xclip -selection clipboard
  echo "\n[codexD] Prompt copied to clipboard via xclip." 1>&2
else
  echo "\n[codexD] Clipboard utility not found; printed to stdout." 1>&2
fi

