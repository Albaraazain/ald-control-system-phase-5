2025-09-20 15:50:16,938 - machine_control - INFO - ALD Control System starting via CLI
2025-09-20 15:50:16,938 - machine_control - INFO - Effective Config -> PLC: simulation, IP: -, Port: -, Hostname: -, Auto-discover: false, LogLevel: INFO, LogFile: machine_control.log
2025-09-20 15:50:17,048 - machine_control - INFO - Starting machine control application
2025-09-20 15:50:17,048 - machine_control - INFO - Attempting initial PLC connection...
2025-09-20 15:50:17,049 - machine_control - INFO - Initializing PLC of type real
2025-09-20 15:50:17,049 - machine_control - INFO - Creating real PLC connection
2025-09-20 15:50:17,049 - machine_control - INFO - PLC connection config - IP: 169.254.123.6, Port: 502, Hostname: None, Auto-discover: False
2025-09-20 15:50:17,064 - machine_control - INFO - Using byte order: badc
2025-09-20 15:50:17,064 - machine_control - INFO - Connecting to real PLC at 169.254.123.6:502
2025-09-20 15:50:17,065 - machine_control - INFO - Connected to PLC successfully via static (Target: 169.254.123.6, Port: 502, Slave ID: 1)
2025-09-20 15:50:17,065 - machine_control - INFO - Successfully connected to PLC
2025-09-20 15:50:17,065 - machine_control - INFO - Initializing Supabase client with URL: https://yceyfsqusdmcwgkwxcnt.supabase.co
2025-09-20 15:50:17,065 - machine_control - INFO - API Key (first 10 chars): eyJhbGciOi...
2025-09-20 15:50:17,105 - machine_control - INFO - Supabase client initialized successfully
2025-09-20 15:50:17,369 - machine_control - INFO - Found 40 parameters with Modbus addresses
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'scale_min_voltage' () (ID: 5cd93dc4-7ac9-4891-a5c5-f6317f44b375) read_addr: 2076, write_addr: 3076, data_type: float, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'scale_max_voltage' () (ID: b2001fea-11d7-4aed-9856-c9206c70c27f) read_addr: 2068, write_addr: 3068, data_type: float, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'scale_min_voltage' () (ID: 45712c4d-dcc0-46a7-9e16-12c810fa3439) read_addr: 2066, write_addr: 3066, data_type: float, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'scale_max_voltage' () (ID: 00950d67-97d8-441d-907f-1627409c75d8) read_addr: 2078, write_addr: 3078, data_type: float, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'scale_min_voltage' () (ID: 4c2e51ab-d694-4d85-8c26-01c0ec732e1e) read_addr: 2100, write_addr: 3100, data_type: float, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'scale_max_voltage' () (ID: a9db4b32-e34a-4cf1-82ac-eb32ce63ca2d) read_addr: 2098, write_addr: 3098, data_type: float, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'flow' () (ID: 35969620-6843-4130-8eca-d6b62dc74dbf) read_addr: 2082, write_addr: 2086, data_type: float, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'fault_status' () (ID: 31f98043-793e-4b96-aa2c-ef4aa70751cb) read_addr: 36, write_addr: 36, data_type: binary, read_type: discrete_input, write_type: discrete_input
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'temperature' () (ID: b6433c16-cb13-4e6a-b5b8-1b1519f0b44b) read_addr: 2018, write_addr: 3018, data_type: float, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'temperature' () (ID: e00b0f66-3c05-48a1-8318-f7d1da5f628e) read_addr: 2110, write_addr: 3110, data_type: float, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'temperature' () (ID: 62c28aac-7300-4d3d-85c7-f043c3226439) read_addr: 2054, write_addr: 3054, data_type: float, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'power_on' () (ID: 9c53f4ef-5506-4a45-9718-af8a7b233056) read_addr: 37, write_addr: 37, data_type: binary, read_type: coil, write_type: coil
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'valve_state' () (ID: 896208fd-0e1f-49a2-9ef6-46ab0d341bee) read_addr: 17, write_addr: 1017, data_type: binary, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'power_on' () (ID: 73f16b0e-6a82-4027-a1cf-66bfa16dba69) read_addr: 4, write_addr: 1004, data_type: binary, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'zero_cal' () (ID: 8f6c5108-58e2-4efd-9bfe-675e640decb7) read_addr: 8, write_addr: 1008, data_type: binary, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'valve_state' () (ID: 846bc6d6-04df-4318-affb-b97cf7238793) read_addr: 16, write_addr: 1016, data_type: binary, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'span_cal' () (ID: 538fcee5-09ec-45ba-83e0-62b73761bf9a) read_addr: 7, write_addr: 1007, data_type: binary, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'valve_state' () (ID: c6d493fa-adf3-4784-bb80-3425dd276d49) read_addr: 15, write_addr: 1015, data_type: binary, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'power_on' () (ID: ca61248a-9be5-43d2-a204-df6f15ef4fe7) read_addr: 0, write_addr: 1000, data_type: binary, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'power_on' () (ID: 687cf16a-8d3d-45ce-8a94-d20ec07f6dcd) read_addr: 27, write_addr: 1027, data_type: binary, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'scale_min' () (ID: e4464c5a-cc47-4b8e-95f0-d0c5c969270c) read_addr: 2074, write_addr: 3074, data_type: float, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'scale_max' () (ID: 61342cfe-7a0c-4ca4-a30b-1770b9e38e2d) read_addr: 2072, write_addr: 3070, data_type: float, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'pressure' () (ID: 500c0329-946e-48c6-9b52-c08e65bd0292) read_addr: 2070, write_addr: 2073, data_type: float, read_type: input, write_type: input
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'power_on' () (ID: b6ffc326-6445-440f-9642-39e86953b399) read_addr: 29, write_addr: 1029, data_type: binary, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'zero_cal' () (ID: 27b5f623-a88e-4a94-aba2-58cc30c5257c) read_addr: 6, write_addr: 1006, data_type: binary, read_type: input, write_type: holding
2025-09-20 15:50:17,370 - machine_control - INFO - Parameter 'scale_min' () (ID: 656f98b2-1d0f-4f65-a5d0-a3b2357bbeaf) read_addr: 2084, write_addr: 3084, data_type: float, read_type: input, write_type: holding
2025-09-20 15:50:17,371 - machine_control - INFO - Parameter 'pressure' () (ID: 8fe19753-ebac-47ce-8461-a713b4e42695) read_addr: 2060, write_addr: 2060, data_type: float, read_type: input, write_type: input
2025-09-20 15:50:17,371 - machine_control - INFO - Parameter 'zero_cal' () (ID: b48a22bf-461f-4c0f-8da9-b1544b0f3d70) read_addr: 22, write_addr: 1022, data_type: binary, read_type: input, write_type: holding
2025-09-20 15:50:17,371 - machine_control - INFO - Parameter 'valve_state' () (ID: 5adac7f8-816a-45bb-8f6e-ca45b8b4330f) read_addr: 18, write_addr: 1018, data_type: binary, read_type: input, write_type: holding
2025-09-20 15:50:17,371 - machine_control - INFO - Parameter 'valve_state' () (ID: fe443faf-947c-4d15-a5b8-959891cf0930) read_addr: 19, write_addr: 1019, data_type: binary, read_type: input, write_type: holding
2025-09-20 15:50:17,371 - machine_control - INFO - Parameter 'valve_state' () (ID: 78cdc7b1-25dc-42b9-b8af-a9a615305ac9) read_addr: 20, write_addr: 1020, data_type: binary, read_type: input, write_type: holding
2025-09-20 15:50:17,371 - machine_control - INFO - Parameter 'scale_max' () (ID: 35dc8e4c-06bc-4c0e-adbf-f045c1322f1a) read_addr: 2062, write_addr: 3062, data_type: float, read_type: input, write_type: holding
2025-09-20 15:50:17,371 - machine_control - INFO - Parameter 'power_on' () (ID: 9917618c-7325-4771-a771-65b42c6d6c73) read_addr: 10, write_addr: 10, data_type: binary, read_type: coil, write_type: coil
2025-09-20 15:50:17,371 - machine_control - INFO - Parameter 'valve_state' () (ID: e5001e41-7b4e-4afd-aa78-3f862be12f0a) read_addr: 11, write_addr: 11, data_type: binary, read_type: coil, write_type: coil
2025-09-20 15:50:17,371 - machine_control - INFO - Parameter 'temperature' () (ID: 4567ba45-1c86-45d2-bf4d-b1cf306f387a) read_addr: 2034, write_addr: 3034, data_type: float, read_type: input, write_type: holding
2025-09-20 15:50:17,371 - machine_control - INFO - Parameter 'purity' () (ID: 3f9fffa2-3176-43c3-a159-ffd4c3aadbb8) read_addr: 35, write_addr: 35, data_type: binary, read_type: discrete_input, write_type: discrete_input
2025-09-20 15:50:17,371 - machine_control - INFO - Parameter 'scale_max' () (ID: 12db5c62-1791-4b52-85e7-491965dc02e9) read_addr: 2080, write_addr: 3080, data_type: float, read_type: input, write_type: holding
2025-09-20 15:50:17,371 - machine_control - INFO - Parameter 'span_cal' () (ID: 83b03e5c-ec49-4123-80e6-8043302bbe3d) read_addr: 21, write_addr: 1021, data_type: binary, read_type: input, write_type: holding
2025-09-20 15:50:17,371 - machine_control - INFO - Parameter 'span_cal' () (ID: d685d5b4-012e-4f23-982c-6bb4c4b23adf) read_addr: 9, write_addr: 1009, data_type: binary, read_type: input, write_type: holding
2025-09-20 15:50:17,371 - machine_control - INFO - Parameter 'scale_min' () (ID: 7f9ede59-32bd-4420-91e1-c5bc7b077faf) read_addr: 2064, write_addr: 3064, data_type: float, read_type: input, write_type: holding
2025-09-20 15:50:17,371 - machine_control - INFO - Loaded metadata for 40 parameters
2025-09-20 15:50:17,498 - machine_control - INFO - Found 0 valve parameters
2025-09-20 15:50:17,498 - machine_control - WARNING - No valve parameters found
2025-09-20 15:50:17,635 - machine_control - INFO - Found 0 potential purge parameters
2025-09-20 15:50:17,635 - machine_control - WARNING - No purge operation parameter found in database
2025-09-20 15:50:17,635 - machine_control - INFO - Using default purge address: address 20, data_type: binary
2025-09-20 15:50:17,759 - machine_control - INFO - ✅ PLC connection initialized successfully
2025-09-20 15:50:17,759 - machine_control - INFO - Service starting with PLC connected: True
2025-09-20 15:50:17,759 - machine_control - INFO - Starting connection monitor...
2025-09-20 15:50:17,759 - machine_control - INFO - Starting connection monitor...
2025-09-20 15:50:17,760 - machine_control - INFO - Connection monitor started
2025-09-20 15:50:17,760 - machine_control - INFO - Creating async Supabase client...
2025-09-20 15:50:17,760 - machine_control - INFO - Initializing async Supabase client with URL: https://yceyfsqusdmcwgkwxcnt.supabase.co
2025-09-20 15:50:17,760 - machine_control - INFO - API Key (first 10 chars): eyJhbGciOi...
2025-09-20 15:50:17,767 - machine_control - INFO - Async Supabase client initialized successfully
2025-09-20 15:50:17,767 - machine_control - INFO - Setting up command listener...
2025-09-20 15:50:17,767 - machine_control - INFO - Subscribing to INSERT events on recipe_commands table...
2025-09-20 15:50:17,770 - machine_control - INFO - ✅ PLC connection established
2025-09-20 15:50:18,347 - machine_control - INFO - Successfully subscribed to recipe_commands table
2025-09-20 15:50:18,347 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:50:18,441 - machine_control - INFO - No pending commands found
2025-09-20 15:50:18,441 - machine_control - INFO - Checked for existing pending commands
2025-09-20 15:50:18,441 - machine_control - INFO - Starting command polling as a fallback mechanism
2025-09-20 15:50:18,442 - machine_control - INFO - Setting up parameter control listener with realtime support...
2025-09-20 15:50:18,442 - machine_control - INFO - Setting up realtime subscriptions for parameter_control_commands table...
2025-09-20 15:50:18,442 - machine_control - INFO - Subscribing to realtime channel...
2025-09-20 15:50:18,443 - machine_control - INFO - Successfully subscribed to realtime channel: parameter-control-commands-e3e6e280-0794-459f-84d5-5e468f60746e
2025-09-20 15:50:18,443 - machine_control - INFO - Starting realtime connection monitor
2025-09-20 15:50:18,443 - machine_control - INFO - Checking for existing pending parameter control commands...
2025-09-20 15:50:18,443 - machine_control - INFO - Checking for existing pending parameter control commands...
2025-09-20 15:50:18,610 - machine_control - INFO - Started parameter control command polling as fallback mechanism
2025-09-20 15:50:18,610 - machine_control - INFO - ✅ Parameter control listener ready with REALTIME + polling fallback
2025-09-20 15:50:18,610 - machine_control - INFO - Machine control application running
2025-09-20 15:50:18,610 - machine_control - INFO - ============================================================
2025-09-20 15:50:18,610 - machine_control - INFO - System Status:
2025-09-20 15:50:18,611 - machine_control - INFO -   - PLC Connection: ✅ Connected
2025-09-20 15:50:18,611 - machine_control - INFO -   - Realtime Channels: ✅ Active
2025-09-20 15:50:18,611 - machine_control - INFO -   - Machine ID: e3e6e280-0794-459f-84d5-5e468f60746e
2025-09-20 15:50:18,611 - machine_control - INFO - ============================================================
2025-09-20 15:50:18,611 - machine_control - INFO - Service is ready to receive commands
2025-09-20 15:50:18,612 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:50:18,709 - machine_control - INFO - No pending commands found
2025-09-20 15:50:18,709 - machine_control - INFO - Starting parameter command polling (interval: 10s, realtime: True)
2025-09-20 15:50:23,710 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:50:23,947 - machine_control - INFO - No pending commands found
2025-09-20 15:50:28,949 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:50:29,176 - machine_control - INFO - No pending commands found
2025-09-20 15:50:34,177 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:50:34,417 - machine_control - INFO - No pending commands found
2025-09-20 15:50:39,419 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:50:39,664 - machine_control - INFO - No pending commands found
2025-09-20 15:50:44,665 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:50:44,907 - machine_control - INFO - No pending commands found
2025-09-20 15:50:49,909 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:50:50,136 - machine_control - INFO - No pending commands found
2025-09-20 15:50:55,137 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:50:55,385 - machine_control - INFO - No pending commands found
2025-09-20 15:51:00,386 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:51:00,641 - machine_control - INFO - No pending commands found
2025-09-20 15:51:05,642 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:51:05,887 - machine_control - INFO - No pending commands found
2025-09-20 15:51:10,889 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:51:11,137 - machine_control - INFO - No pending commands found
2025-09-20 15:51:16,139 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:51:16,366 - machine_control - INFO - No pending commands found
2025-09-20 15:51:21,366 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:51:21,467 - machine_control - INFO - No pending commands found
2025-09-20 15:51:26,469 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:51:26,784 - machine_control - INFO - No pending commands found
2025-09-20 15:51:31,785 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:51:32,207 - machine_control - INFO - No pending commands found
2025-09-20 15:51:37,209 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:51:37,647 - machine_control - INFO - No pending commands found
2025-09-20 15:51:42,648 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:51:43,006 - machine_control - INFO - No pending commands found
2025-09-20 15:51:48,007 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:51:48,279 - machine_control - INFO - No pending commands found
2025-09-20 15:51:53,281 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:51:53,500 - machine_control - INFO - No pending commands found
2025-09-20 15:51:58,502 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:51:58,745 - machine_control - INFO - No pending commands found
2025-09-20 15:52:03,747 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:52:03,983 - machine_control - INFO - No pending commands found
2025-09-20 15:52:08,984 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:52:09,266 - machine_control - INFO - No pending commands found
2025-09-20 15:52:14,268 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:52:14,524 - machine_control - INFO - No pending commands found
2025-09-20 15:52:19,526 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:52:19,633 - machine_control - INFO - No pending commands found
2025-09-20 15:52:24,634 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:52:24,862 - machine_control - INFO - No pending commands found
2025-09-20 15:52:29,863 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:52:30,137 - machine_control - INFO - No pending commands found
2025-09-20 15:52:35,137 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:52:35,405 - machine_control - INFO - No pending commands found
2025-09-20 15:52:40,406 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:52:40,635 - machine_control - INFO - No pending commands found
2025-09-20 15:52:45,637 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:52:45,899 - machine_control - INFO - No pending commands found
2025-09-20 15:52:50,901 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:52:51,157 - machine_control - INFO - No pending commands found
2025-09-20 15:52:56,159 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:52:56,399 - machine_control - INFO - No pending commands found
2025-09-20 15:53:01,401 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:53:01,630 - machine_control - INFO - No pending commands found
2025-09-20 15:53:06,631 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:53:06,875 - machine_control - INFO - No pending commands found
2025-09-20 15:53:11,876 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:53:12,103 - machine_control - INFO - No pending commands found
2025-09-20 15:53:17,104 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:53:17,386 - machine_control - INFO - No pending commands found
2025-09-20 15:53:22,387 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:53:22,501 - machine_control - INFO - No pending commands found
2025-09-20 15:53:27,502 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:53:27,736 - machine_control - INFO - No pending commands found
2025-09-20 15:53:32,737 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:53:32,985 - machine_control - INFO - No pending commands found
2025-09-20 15:53:37,986 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:53:38,237 - machine_control - INFO - No pending commands found
2025-09-20 15:53:43,238 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:53:43,478 - machine_control - INFO - No pending commands found
2025-09-20 15:53:48,480 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:53:48,720 - machine_control - INFO - No pending commands found
2025-09-20 15:53:53,721 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:53:53,934 - machine_control - INFO - No pending commands found
2025-09-20 15:53:58,935 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:53:59,188 - machine_control - INFO - No pending commands found
2025-09-20 15:54:04,189 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:54:04,439 - machine_control - INFO - No pending commands found
2025-09-20 15:54:09,441 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:54:09,669 - machine_control - INFO - No pending commands found
2025-09-20 15:54:14,670 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:54:14,901 - machine_control - INFO - No pending commands found
2025-09-20 15:54:19,902 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:54:20,003 - machine_control - INFO - No pending commands found
2025-09-20 15:54:25,004 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:54:25,250 - machine_control - INFO - No pending commands found
2025-09-20 15:54:30,251 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:54:30,487 - machine_control - INFO - No pending commands found
2025-09-20 15:54:35,488 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:54:35,727 - machine_control - INFO - No pending commands found
2025-09-20 15:54:40,728 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:54:40,989 - machine_control - INFO - No pending commands found
2025-09-20 15:54:45,991 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:54:46,242 - machine_control - INFO - No pending commands found
2025-09-20 15:54:51,244 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:54:51,477 - machine_control - INFO - No pending commands found
2025-09-20 15:54:56,478 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:54:56,739 - machine_control - INFO - No pending commands found
2025-09-20 15:55:01,740 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:55:01,972 - machine_control - INFO - No pending commands found
2025-09-20 15:55:06,974 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:55:07,220 - machine_control - INFO - No pending commands found
2025-09-20 15:55:12,222 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:55:12,426 - machine_control - INFO - No pending commands found
2025-09-20 15:55:17,428 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:55:17,658 - machine_control - INFO - No pending commands found
2025-09-20 15:55:18,660 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 301s
2025-09-20 15:55:22,660 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:55:22,785 - machine_control - INFO - No pending commands found
2025-09-20 15:55:27,786 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:55:28,027 - machine_control - INFO - No pending commands found
2025-09-20 15:55:33,029 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:55:34,351 - machine_control - INFO - No pending commands found
2025-09-20 15:55:39,352 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:55:39,651 - machine_control - INFO - No pending commands found
2025-09-20 15:55:44,652 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:55:44,907 - machine_control - INFO - No pending commands found
2025-09-20 15:55:49,909 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:55:50,336 - machine_control - INFO - No pending commands found
2025-09-20 15:55:55,337 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:55:55,740 - machine_control - INFO - No pending commands found
2025-09-20 15:56:00,741 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:56:01,079 - machine_control - INFO - No pending commands found
2025-09-20 15:56:06,081 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:56:06,701 - machine_control - INFO - No pending commands found
2025-09-20 15:56:11,703 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:56:16,657 - machine_control - INFO - No pending commands found
2025-09-20 15:56:21,659 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:56:21,834 - machine_control - INFO - No pending commands found
2025-09-20 15:56:26,835 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:56:27,107 - machine_control - INFO - No pending commands found
2025-09-20 15:56:32,108 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:56:32,371 - machine_control - INFO - No pending commands found
2025-09-20 15:56:37,373 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:56:38,339 - machine_control - INFO - No pending commands found
2025-09-20 15:56:43,341 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:56:43,665 - machine_control - INFO - No pending commands found
2025-09-20 15:56:48,666 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:56:48,911 - machine_control - INFO - No pending commands found
2025-09-20 15:56:53,913 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:56:54,234 - machine_control - INFO - No pending commands found
2025-09-20 15:56:59,235 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:56:59,479 - machine_control - INFO - No pending commands found
2025-09-20 15:57:04,481 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:57:04,726 - machine_control - INFO - No pending commands found
2025-09-20 15:57:09,728 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:57:09,954 - machine_control - INFO - No pending commands found
2025-09-20 15:57:14,955 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:57:15,187 - machine_control - INFO - No pending commands found
2025-09-20 15:57:20,188 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:57:20,292 - machine_control - INFO - No pending commands found
2025-09-20 15:57:25,293 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:57:25,533 - machine_control - INFO - No pending commands found
2025-09-20 15:57:30,534 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:57:30,818 - machine_control - INFO - No pending commands found
2025-09-20 15:57:35,819 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:57:36,036 - machine_control - INFO - No pending commands found
2025-09-20 15:57:41,037 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:57:41,311 - machine_control - INFO - No pending commands found
2025-09-20 15:57:46,313 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:57:46,603 - machine_control - INFO - No pending commands found
2025-09-20 15:57:51,605 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:57:51,843 - machine_control - INFO - No pending commands found
2025-09-20 15:57:56,844 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:57:57,088 - machine_control - INFO - No pending commands found
2025-09-20 15:58:02,090 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:58:02,326 - machine_control - INFO - No pending commands found
2025-09-20 15:58:07,328 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:58:07,584 - machine_control - INFO - No pending commands found
2025-09-20 15:58:12,586 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:58:12,818 - machine_control - INFO - No pending commands found
2025-09-20 15:58:17,819 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:58:18,080 - machine_control - INFO - No pending commands found
2025-09-20 15:58:23,081 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:58:23,192 - machine_control - INFO - No pending commands found
2025-09-20 15:58:28,193 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:58:28,434 - machine_control - INFO - No pending commands found
2025-09-20 15:58:33,436 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:58:33,720 - machine_control - INFO - No pending commands found
2025-09-20 15:58:38,722 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:58:38,955 - machine_control - INFO - No pending commands found
2025-09-20 15:58:43,956 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:58:44,254 - machine_control - INFO - No pending commands found
2025-09-20 15:58:49,255 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:58:49,468 - machine_control - INFO - No pending commands found
2025-09-20 15:58:54,469 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:58:54,678 - machine_control - INFO - No pending commands found
2025-09-20 15:58:59,679 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:58:59,904 - machine_control - INFO - No pending commands found
2025-09-20 15:59:04,905 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:59:05,148 - machine_control - INFO - No pending commands found
2025-09-20 15:59:10,149 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:59:10,387 - machine_control - INFO - No pending commands found
2025-09-20 15:59:15,389 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:59:15,618 - machine_control - INFO - No pending commands found
2025-09-20 15:59:20,619 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:59:20,712 - machine_control - INFO - No pending commands found
2025-09-20 15:59:25,714 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:59:25,954 - machine_control - INFO - No pending commands found
2025-09-20 15:59:30,956 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:59:31,214 - machine_control - INFO - No pending commands found
2025-09-20 15:59:36,216 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:59:36,466 - machine_control - INFO - No pending commands found
2025-09-20 15:59:41,468 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:59:41,744 - machine_control - INFO - No pending commands found
2025-09-20 15:59:46,746 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:59:46,971 - machine_control - INFO - No pending commands found
2025-09-20 15:59:51,972 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:59:52,219 - machine_control - INFO - No pending commands found
2025-09-20 15:59:57,220 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 15:59:57,451 - machine_control - INFO - No pending commands found
2025-09-20 16:00:02,453 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:00:02,765 - machine_control - INFO - No pending commands found
2025-09-20 16:00:07,766 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:00:07,992 - machine_control - INFO - No pending commands found
2025-09-20 16:00:12,994 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:00:13,273 - machine_control - INFO - No pending commands found
2025-09-20 16:00:18,275 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:00:18,502 - machine_control - INFO - No pending commands found
2025-09-20 16:00:19,504 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 602s
2025-09-20 16:00:23,504 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:00:23,850 - machine_control - INFO - No pending commands found
2025-09-20 16:00:28,851 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:00:29,088 - machine_control - INFO - No pending commands found
2025-09-20 16:00:34,089 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:00:34,320 - machine_control - INFO - No pending commands found
2025-09-20 16:00:39,321 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:00:39,574 - machine_control - INFO - No pending commands found
2025-09-20 16:00:44,574 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:00:44,813 - machine_control - INFO - No pending commands found
2025-09-20 16:00:49,814 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:00:50,049 - machine_control - INFO - No pending commands found
2025-09-20 16:00:55,051 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:00:55,266 - machine_control - INFO - No pending commands found
2025-09-20 16:01:00,267 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:01:00,498 - machine_control - INFO - No pending commands found
2025-09-20 16:01:05,500 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:01:05,797 - machine_control - INFO - No pending commands found
2025-09-20 16:01:10,798 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:01:11,113 - machine_control - INFO - No pending commands found
2025-09-20 16:01:16,115 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:01:16,369 - machine_control - INFO - No pending commands found
2025-09-20 16:01:21,370 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:01:21,472 - machine_control - INFO - No pending commands found
2025-09-20 16:01:26,474 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:01:26,687 - machine_control - INFO - No pending commands found
2025-09-20 16:01:31,689 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:01:31,916 - machine_control - INFO - No pending commands found
2025-09-20 16:01:36,918 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:01:37,137 - machine_control - INFO - No pending commands found
2025-09-20 16:01:42,139 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:01:42,363 - machine_control - INFO - No pending commands found
2025-09-20 16:01:47,364 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:01:47,586 - machine_control - INFO - No pending commands found
2025-09-20 16:01:52,587 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:01:52,802 - machine_control - INFO - No pending commands found
2025-09-20 16:01:57,804 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:01:58,100 - machine_control - INFO - No pending commands found
2025-09-20 16:02:03,101 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:02:03,337 - machine_control - INFO - No pending commands found
2025-09-20 16:02:08,339 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:02:08,564 - machine_control - INFO - No pending commands found
2025-09-20 16:02:13,566 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:02:13,800 - machine_control - INFO - No pending commands found
2025-09-20 16:02:18,801 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:02:19,024 - machine_control - INFO - No pending commands found
2025-09-20 16:02:24,026 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 16:02:24,123 - machine_control - INFO - No pending commands found
2025-09-20 16:02:25,125 - machine_control - INFO - Received interrupt signal, initiating cleanup...
2025-09-20 16:02:25,125 - machine_control - INFO - Beginning cleanup process...
2025-09-20 16:02:25,227 - machine_control - INFO - Disconnecting from PLC
2025-09-20 16:02:25,227 - machine_control - INFO - Disconnected from PLC
2025-09-20 16:02:25,227 - machine_control - INFO - Successfully disconnected from PLC
2025-09-20 16:02:25,227 - machine_control - INFO - Application shutdown complete
Task exception was never retrieved
future: <Task finished name='Task-13' coro=<signal_handler() done, defined at /Users/albaraa/ald-control-system-phase-5/src/main.py:64> exception=SystemExit(0)>
Traceback (most recent call last):
  File "/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/asyncio/base_events.py", line 629, in run_until_complete
    self.run_forever()
  File "/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/asyncio/base_events.py", line 596, in run_forever
    self._run_once()
  File "/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/asyncio/base_events.py", line 1890, in _run_once
    handle._run()
  File "/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "/Users/albaraa/ald-control-system-phase-5/src/main.py", line 67, in signal_handler
    await cleanup_handler()
  File "/Users/albaraa/ald-control-system-phase-5/src/main.py", line 62, in cleanup_handler
    sys.exit(0)
SystemExit: 0
2025-09-20 17:53:06,089 - machine_control - INFO - ALD Control System starting via CLI
2025-09-20 17:53:06,089 - machine_control - INFO - Effective Config -> PLC: simulation, IP: -, Port: -, Hostname: -, Auto-discover: false, LogLevel: INFO, LogFile: main_service.log
2025-09-20 17:53:06,270 - machine_control - INFO - Starting machine control application
2025-09-20 17:53:06,270 - machine_control - INFO - Attempting initial PLC connection...
2025-09-20 17:53:06,270 - machine_control - INFO - Initializing PLC of type simulation
2025-09-20 17:53:06,270 - machine_control - INFO - Creating simulation PLC
2025-09-20 17:53:06,270 - machine_control - INFO - Initializing simulation PLC
2025-09-20 17:53:06,270 - machine_control - INFO - Initializing Supabase client with URL: https://yceyfsqusdmcwgkwxcnt.supabase.co
2025-09-20 17:53:06,270 - machine_control - INFO - API Key (first 10 chars): eyJhbGciOi...
2025-09-20 17:53:06,308 - machine_control - INFO - Supabase client initialized successfully
2025-09-20 17:53:06,541 - machine_control - INFO - Simulation PLC initialized
2025-09-20 17:53:06,542 - machine_control - INFO - ✅ PLC connection initialized successfully
2025-09-20 17:53:06,542 - machine_control - INFO - Service starting with PLC connected: True
2025-09-20 17:53:06,542 - machine_control - INFO - Creating async Supabase client...
2025-09-20 17:53:06,542 - machine_control - INFO - Initializing async Supabase client with URL: https://yceyfsqusdmcwgkwxcnt.supabase.co
2025-09-20 17:53:06,542 - machine_control - INFO - API Key (first 10 chars): eyJhbGciOi...
2025-09-20 17:53:06,550 - machine_control - INFO - Async Supabase client initialized successfully
2025-09-20 17:53:06,550 - machine_control - INFO - Started 3 agents: connection-monitor, command-listener, parameter-control-listener
2025-09-20 17:53:06,550 - machine_control - INFO - Machine control application running
2025-09-20 17:53:06,550 - machine_control - INFO - ============================================================
2025-09-20 17:53:06,550 - machine_control - INFO - System Status:
2025-09-20 17:53:06,550 - machine_control - INFO - ❌ Disconnected
2025-09-20 17:53:06,550 - machine_control - INFO - ⚠️ Using Polling
2025-09-20 17:53:06,550 - machine_control - INFO -   - Machine ID: e3e6e280-0794-459f-84d5-5e468f60746e
2025-09-20 17:53:06,550 - machine_control - INFO - ============================================================
2025-09-20 17:53:06,551 - machine_control - INFO - Service is ready to receive commands
2025-09-20 17:53:06,551 - machine_control - INFO - [agent:connection-monitor] starting
2025-09-20 17:53:06,551 - machine_control - INFO - Starting connection monitor...
2025-09-20 17:53:06,551 - machine_control - INFO - Connection monitor started
2025-09-20 17:53:06,551 - machine_control - INFO - [agent:command-listener] starting
2025-09-20 17:53:06,551 - machine_control - INFO - Setting up command listener...
2025-09-20 17:53:06,551 - machine_control - INFO - Subscribing to INSERT events on recipe_commands table...
2025-09-20 17:53:06,555 - machine_control - INFO - [agent:parameter-control-listener] starting
2025-09-20 17:53:06,555 - machine_control - INFO - Setting up parameter control listener with realtime support...
2025-09-20 17:53:06,555 - machine_control - INFO - Setting up realtime subscriptions for parameter_control_commands table...
2025-09-20 17:53:06,556 - machine_control - INFO - Subscribing to realtime channel...
2025-09-20 17:53:06,556 - machine_control - INFO - ✅ PLC connection established
2025-09-20 17:53:07,103 - machine_control - INFO - Successfully subscribed to realtime channel: parameter-control-commands-e3e6e280-0794-459f-84d5-5e468f60746e
2025-09-20 17:53:07,103 - machine_control - INFO - Starting realtime connection monitor
2025-09-20 17:53:07,103 - machine_control - INFO - Checking for existing pending parameter control commands...
2025-09-20 17:53:07,103 - machine_control - INFO - Checking for existing pending parameter control commands...
2025-09-20 17:53:07,198 - machine_control - INFO - Started parameter control command polling as fallback mechanism
2025-09-20 17:53:07,199 - machine_control - INFO - ✅ Parameter control listener ready with REALTIME + polling fallback
2025-09-20 17:53:07,199 - machine_control - INFO - Starting parameter command polling (interval: 10s, realtime: True)
2025-09-20 17:53:07,199 - machine_control - INFO - Successfully subscribed to recipe_commands table
2025-09-20 17:53:07,199 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:53:07,292 - machine_control - INFO - No pending commands found
2025-09-20 17:53:07,292 - machine_control - INFO - Checked for existing pending commands
2025-09-20 17:53:07,292 - machine_control - INFO - Starting command polling as a fallback mechanism
2025-09-20 17:53:07,292 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:53:07,412 - machine_control - INFO - No pending commands found
2025-09-20 17:53:12,413 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:53:12,739 - machine_control - INFO - No pending commands found
2025-09-20 17:53:17,741 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:53:18,167 - machine_control - INFO - No pending commands found
2025-09-20 17:53:23,169 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:53:23,412 - machine_control - INFO - No pending commands found
2025-09-20 17:53:28,412 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:53:28,657 - machine_control - INFO - No pending commands found
2025-09-20 17:53:33,658 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:53:33,957 - machine_control - INFO - No pending commands found
2025-09-20 17:53:36,961 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 30s
2025-09-20 17:53:38,958 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:53:39,204 - machine_control - INFO - No pending commands found
2025-09-20 17:53:44,206 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:53:44,510 - machine_control - INFO - No pending commands found
2025-09-20 17:53:49,512 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:53:49,842 - machine_control - INFO - No pending commands found
2025-09-20 17:53:54,843 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:53:55,110 - machine_control - INFO - No pending commands found
2025-09-20 17:54:00,111 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:54:00,340 - machine_control - INFO - No pending commands found
2025-09-20 17:54:05,342 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:54:05,564 - machine_control - INFO - No pending commands found
2025-09-20 17:54:07,567 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 61s
2025-09-20 17:54:09,640 - machine_control - INFO - Received insert event: {'data': {'table': 'recipe_commands', 'type': 'INSERT', 'record': {'created_at': '2025-09-20T14:54:09.488179+00:00', 'error_message': None, 'executed_at': None, 'id': '369caa6a-faa3-4e67-a88c-fe255ff045b7', 'machine_id': 'e3e6e280-0794-459f-84d5-5e468f60746e', 'parameters': {'operator_id': '1c6748d7-5cb2-444c-8e2e-416c14f5d6dd', 'recipe_id': 'b31987ad-f299-4b13-a43c-2c89767e6034'}, 'recipe_step_id': None, 'status': 'pending', 'type': 'start_recipe', 'updated_at': '2025-09-20T14:54:09.488179+00:00'}, 'columns': [{'name': 'type', 'type': 'varchar'}, {'name': 'parameters', 'type': 'jsonb'}, {'name': 'status', 'type': 'varchar'}, {'name': 'created_at', 'type': 'timestamptz'}, {'name': 'updated_at', 'type': 'timestamptz'}, {'name': 'executed_at', 'type': 'timestamptz'}, {'name': 'error_message', 'type': 'text'}, {'name': 'machine_id', 'type': 'uuid'}, {'name': 'recipe_step_id', 'type': 'uuid'}, {'name': 'id', 'type': 'uuid'}], 'errors': None, 'schema': 'public', 'commit_timestamp': '2025-09-20T14:54:09.504Z'}, 'ids': [47688524]}
2025-09-20 17:54:09,640 - machine_control - INFO - Received command payload
2025-09-20 17:54:09,641 - machine_control - INFO - New pending command: 369caa6a-faa3-4e67-a88c-fe255ff045b7, type: start_recipe
2025-09-20 17:54:09,752 - machine_control - INFO - Command 369caa6a-faa3-4e67-a88c-fe255ff045b7 already claimed or status changed
2025-09-20 17:54:10,565 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:54:10,673 - machine_control - INFO - No pending commands found
2025-09-20 17:54:14,935 - machine_control - INFO - Received insert event: {'data': {'table': 'recipe_commands', 'type': 'INSERT', 'record': {'created_at': '2025-09-20T14:54:14.922064+00:00', 'error_message': None, 'executed_at': None, 'id': '092920e8-6108-40c6-a25e-2a08d43a7ef1', 'machine_id': 'e3e6e280-0794-459f-84d5-5e468f60746e', 'parameters': {'operator_id': '1c6748d7-5cb2-444c-8e2e-416c14f5d6dd', 'recipe_id': 'b31987ad-f299-4b13-a43c-2c89767e6034'}, 'recipe_step_id': None, 'status': 'pending', 'type': 'start_recipe', 'updated_at': '2025-09-20T14:54:14.922064+00:00'}, 'columns': [{'name': 'type', 'type': 'varchar'}, {'name': 'parameters', 'type': 'jsonb'}, {'name': 'status', 'type': 'varchar'}, {'name': 'created_at', 'type': 'timestamptz'}, {'name': 'updated_at', 'type': 'timestamptz'}, {'name': 'executed_at', 'type': 'timestamptz'}, {'name': 'error_message', 'type': 'text'}, {'name': 'machine_id', 'type': 'uuid'}, {'name': 'recipe_step_id', 'type': 'uuid'}, {'name': 'id', 'type': 'uuid'}], 'errors': None, 'schema': 'public', 'commit_timestamp': '2025-09-20T14:54:14.924Z'}, 'ids': [47688524]}
2025-09-20 17:54:14,935 - machine_control - INFO - Received command payload
2025-09-20 17:54:14,935 - machine_control - INFO - New pending command: 092920e8-6108-40c6-a25e-2a08d43a7ef1, type: start_recipe
2025-09-20 17:54:15,117 - machine_control - INFO - Command 092920e8-6108-40c6-a25e-2a08d43a7ef1 already claimed or status changed
2025-09-20 17:54:15,675 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:54:15,782 - machine_control - INFO - No pending commands found
2025-09-20 17:54:20,783 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:54:21,022 - machine_control - INFO - No pending commands found
2025-09-20 17:54:26,023 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:54:26,247 - machine_control - INFO - No pending commands found
2025-09-20 17:54:31,249 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:54:31,464 - machine_control - INFO - No pending commands found
2025-09-20 17:54:36,465 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:54:36,702 - machine_control - INFO - No pending commands found
2025-09-20 17:54:37,704 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 91s
2025-09-20 17:54:41,704 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:54:42,054 - machine_control - INFO - No pending commands found
2025-09-20 17:54:47,055 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:54:47,293 - machine_control - INFO - No pending commands found
2025-09-20 17:54:52,294 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:54:52,521 - machine_control - INFO - No pending commands found
2025-09-20 17:54:57,523 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:54:57,815 - machine_control - INFO - No pending commands found
2025-09-20 17:55:02,816 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:55:03,058 - machine_control - INFO - No pending commands found
2025-09-20 17:55:08,059 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:55:08,156 - machine_control - INFO - No pending commands found
2025-09-20 17:55:08,175 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 122s
2025-09-20 17:55:13,158 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:55:13,370 - machine_control - INFO - No pending commands found
2025-09-20 17:55:18,371 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:55:18,588 - machine_control - INFO - No pending commands found
2025-09-20 17:55:23,589 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:55:23,865 - machine_control - INFO - No pending commands found
2025-09-20 17:55:28,866 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:55:29,084 - machine_control - INFO - No pending commands found
2025-09-20 17:55:34,085 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:55:34,305 - machine_control - INFO - No pending commands found
2025-09-20 17:55:38,309 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 152s
2025-09-20 17:55:39,306 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:55:39,606 - machine_control - INFO - No pending commands found
2025-09-20 17:55:44,608 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:55:44,969 - machine_control - INFO - No pending commands found
2025-09-20 17:55:49,970 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:55:50,244 - machine_control - INFO - No pending commands found
2025-09-20 17:55:55,245 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:55:55,653 - machine_control - INFO - No pending commands found
2025-09-20 17:56:00,654 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:56:01,021 - machine_control - INFO - No pending commands found
2025-09-20 17:56:06,024 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:56:06,309 - machine_control - INFO - No pending commands found
2025-09-20 17:56:08,410 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 182s
2025-09-20 17:56:11,310 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:56:11,428 - machine_control - INFO - No pending commands found
2025-09-20 17:56:16,430 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:56:16,681 - machine_control - INFO - No pending commands found
2025-09-20 17:56:21,683 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:56:21,916 - machine_control - INFO - No pending commands found
2025-09-20 17:56:26,918 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:56:27,181 - machine_control - INFO - No pending commands found
2025-09-20 17:56:32,182 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:56:32,417 - machine_control - INFO - No pending commands found
2025-09-20 17:56:37,418 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:56:37,644 - machine_control - INFO - No pending commands found
2025-09-20 17:56:38,645 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 212s
2025-09-20 17:56:42,645 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:56:42,882 - machine_control - INFO - No pending commands found
2025-09-20 17:56:46,186 - machine_control - INFO - Received insert event: {'data': {'table': 'recipe_commands', 'type': 'INSERT', 'record': {'created_at': '2025-09-20T14:56:46.088712+00:00', 'error_message': None, 'executed_at': None, 'id': '5278a888-5089-462f-be3f-a2b8d03ad5e1', 'machine_id': 'e3e6e280-0794-459f-84d5-5e468f60746e', 'parameters': {'operator_id': '1c6748d7-5cb2-444c-8e2e-416c14f5d6dd', 'recipe_id': 'b31987ad-f299-4b13-a43c-2c89767e6034'}, 'recipe_step_id': None, 'status': 'pending', 'type': 'start_recipe', 'updated_at': '2025-09-20T14:56:46.088712+00:00'}, 'columns': [{'name': 'type', 'type': 'varchar'}, {'name': 'parameters', 'type': 'jsonb'}, {'name': 'status', 'type': 'varchar'}, {'name': 'created_at', 'type': 'timestamptz'}, {'name': 'updated_at', 'type': 'timestamptz'}, {'name': 'executed_at', 'type': 'timestamptz'}, {'name': 'error_message', 'type': 'text'}, {'name': 'machine_id', 'type': 'uuid'}, {'name': 'recipe_step_id', 'type': 'uuid'}, {'name': 'id', 'type': 'uuid'}], 'errors': None, 'schema': 'public', 'commit_timestamp': '2025-09-20T14:56:46.099Z'}, 'ids': [47688524]}
2025-09-20 17:56:46,187 - machine_control - INFO - Received command payload
2025-09-20 17:56:46,187 - machine_control - INFO - New pending command: 5278a888-5089-462f-be3f-a2b8d03ad5e1, type: start_recipe
2025-09-20 17:56:46,287 - machine_control - INFO - Command 5278a888-5089-462f-be3f-a2b8d03ad5e1 already claimed or status changed
2025-09-20 17:56:47,883 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:56:47,986 - machine_control - INFO - No pending commands found
2025-09-20 17:56:52,988 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:56:53,304 - machine_control - INFO - No pending commands found
2025-09-20 17:56:58,306 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:56:58,529 - machine_control - INFO - No pending commands found
2025-09-20 17:57:03,530 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:57:03,840 - machine_control - INFO - No pending commands found
2025-09-20 17:57:08,842 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:57:09,009 - machine_control - INFO - No pending commands found
2025-09-20 17:57:09,009 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 242s
2025-09-20 17:57:13,446 - machine_control - INFO - Received insert event: {'data': {'table': 'recipe_commands', 'type': 'INSERT', 'record': {'created_at': '2025-09-20T14:57:13.296458+00:00', 'error_message': None, 'executed_at': None, 'id': '352331e1-1cc0-464b-a56f-5147ee931bee', 'machine_id': 'e3e6e280-0794-459f-84d5-5e468f60746e', 'parameters': {'operator_id': '1c6748d7-5cb2-444c-8e2e-416c14f5d6dd', 'recipe_id': 'b31987ad-f299-4b13-a43c-2c89767e6034'}, 'recipe_step_id': None, 'status': 'pending', 'type': 'start_recipe', 'updated_at': '2025-09-20T14:57:13.296458+00:00'}, 'columns': [{'name': 'type', 'type': 'varchar'}, {'name': 'parameters', 'type': 'jsonb'}, {'name': 'status', 'type': 'varchar'}, {'name': 'created_at', 'type': 'timestamptz'}, {'name': 'updated_at', 'type': 'timestamptz'}, {'name': 'executed_at', 'type': 'timestamptz'}, {'name': 'error_message', 'type': 'text'}, {'name': 'machine_id', 'type': 'uuid'}, {'name': 'recipe_step_id', 'type': 'uuid'}, {'name': 'id', 'type': 'uuid'}], 'errors': None, 'schema': 'public', 'commit_timestamp': '2025-09-20T14:57:13.300Z'}, 'ids': [47688524]}
2025-09-20 17:57:13,449 - machine_control - INFO - Received command payload
2025-09-20 17:57:13,449 - machine_control - INFO - New pending command: 352331e1-1cc0-464b-a56f-5147ee931bee, type: start_recipe
2025-09-20 17:57:13,638 - machine_control - INFO - Command 352331e1-1cc0-464b-a56f-5147ee931bee already claimed or status changed
2025-09-20 17:57:14,010 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:57:14,161 - machine_control - INFO - No pending commands found
2025-09-20 17:57:19,162 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:57:19,393 - machine_control - INFO - No pending commands found
2025-09-20 17:57:24,395 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:57:24,637 - machine_control - INFO - No pending commands found
2025-09-20 17:57:29,639 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:57:29,879 - machine_control - INFO - No pending commands found
2025-09-20 17:57:34,880 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:57:35,153 - machine_control - INFO - No pending commands found
2025-09-20 17:57:35,420 - machine_control - INFO - Received insert event: {'data': {'table': 'recipe_commands', 'type': 'INSERT', 'record': {'created_at': '2025-09-20T14:57:35.396362+00:00', 'error_message': None, 'executed_at': None, 'id': '2d4e35bb-9c6f-431d-9dea-aa09550d2d03', 'machine_id': 'e3e6e280-0794-459f-84d5-5e468f60746e', 'parameters': {'operator_id': '1c6748d7-5cb2-444c-8e2e-416c14f5d6dd', 'recipe_id': 'b31987ad-f299-4b13-a43c-2c89767e6034'}, 'recipe_step_id': None, 'status': 'pending', 'type': 'start_recipe', 'updated_at': '2025-09-20T14:57:35.396362+00:00'}, 'columns': [{'name': 'type', 'type': 'varchar'}, {'name': 'parameters', 'type': 'jsonb'}, {'name': 'status', 'type': 'varchar'}, {'name': 'created_at', 'type': 'timestamptz'}, {'name': 'updated_at', 'type': 'timestamptz'}, {'name': 'executed_at', 'type': 'timestamptz'}, {'name': 'error_message', 'type': 'text'}, {'name': 'machine_id', 'type': 'uuid'}, {'name': 'recipe_step_id', 'type': 'uuid'}, {'name': 'id', 'type': 'uuid'}], 'errors': None, 'schema': 'public', 'commit_timestamp': '2025-09-20T14:57:35.398Z'}, 'ids': [47688524]}
2025-09-20 17:57:35,420 - machine_control - INFO - Received command payload
2025-09-20 17:57:35,420 - machine_control - INFO - New pending command: 2d4e35bb-9c6f-431d-9dea-aa09550d2d03, type: start_recipe
2025-09-20 17:57:35,524 - machine_control - INFO - Command 2d4e35bb-9c6f-431d-9dea-aa09550d2d03 already claimed or status changed
2025-09-20 17:57:39,157 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 273s
2025-09-20 17:57:40,154 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:57:40,276 - machine_control - INFO - No pending commands found
2025-09-20 17:57:45,276 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:57:45,506 - machine_control - INFO - No pending commands found
2025-09-20 17:57:50,507 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:57:50,753 - machine_control - INFO - No pending commands found
2025-09-20 17:57:55,755 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:57:56,059 - machine_control - INFO - No pending commands found
2025-09-20 17:58:01,059 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:58:01,281 - machine_control - INFO - No pending commands found
2025-09-20 17:58:06,283 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:58:06,499 - machine_control - INFO - No pending commands found
2025-09-20 17:58:09,503 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 303s
2025-09-20 17:58:11,500 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:58:11,592 - machine_control - INFO - No pending commands found
2025-09-20 17:58:16,593 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:58:16,882 - machine_control - INFO - No pending commands found
2025-09-20 17:58:21,883 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:58:22,122 - machine_control - INFO - No pending commands found
2025-09-20 17:58:27,126 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:58:27,369 - machine_control - INFO - No pending commands found
2025-09-20 17:58:32,371 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:58:32,614 - machine_control - INFO - No pending commands found
2025-09-20 17:58:37,616 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:58:37,831 - machine_control - INFO - No pending commands found
2025-09-20 17:58:39,834 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 333s
2025-09-20 17:58:42,833 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:58:43,064 - machine_control - INFO - No pending commands found
2025-09-20 17:58:48,065 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:58:48,295 - machine_control - INFO - No pending commands found
2025-09-20 17:58:53,295 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:58:53,495 - machine_control - INFO - No pending commands found
2025-09-20 17:58:58,496 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:58:58,746 - machine_control - INFO - No pending commands found
2025-09-20 17:59:03,748 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:59:04,003 - machine_control - INFO - No pending commands found
2025-09-20 17:59:09,005 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:59:09,103 - machine_control - INFO - No pending commands found
2025-09-20 17:59:10,105 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 364s
2025-09-20 17:59:14,105 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:59:14,359 - machine_control - INFO - No pending commands found
2025-09-20 17:59:19,359 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:59:19,609 - machine_control - INFO - No pending commands found
2025-09-20 17:59:24,611 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:59:24,827 - machine_control - INFO - No pending commands found
2025-09-20 17:59:29,829 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:59:30,057 - machine_control - INFO - No pending commands found
2025-09-20 17:59:35,058 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:59:35,392 - machine_control - INFO - No pending commands found
2025-09-20 17:59:40,393 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:59:40,637 - machine_control - INFO - No pending commands found
2025-09-20 17:59:40,637 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 394s
2025-09-20 17:59:45,638 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:59:45,878 - machine_control - INFO - No pending commands found
2025-09-20 17:59:50,879 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:59:51,110 - machine_control - INFO - No pending commands found
2025-09-20 17:59:56,111 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 17:59:56,327 - machine_control - INFO - No pending commands found
2025-09-20 18:00:01,328 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:00:01,666 - machine_control - INFO - No pending commands found
2025-09-20 18:00:06,667 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:00:06,886 - machine_control - INFO - No pending commands found
2025-09-20 18:00:10,890 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 424s
2025-09-20 18:00:11,887 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:00:11,984 - machine_control - INFO - No pending commands found
2025-09-20 18:00:16,986 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:00:17,275 - machine_control - INFO - No pending commands found
2025-09-20 18:00:22,276 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:00:22,510 - machine_control - INFO - No pending commands found
2025-09-20 18:00:27,511 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:00:27,782 - machine_control - INFO - No pending commands found
2025-09-20 18:00:32,784 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:00:33,042 - machine_control - INFO - No pending commands found
2025-09-20 18:00:34,196 - machine_control - INFO - Received insert event: {'data': {'table': 'recipe_commands', 'type': 'INSERT', 'record': {'created_at': '2025-09-20T15:00:34.142317+00:00', 'error_message': None, 'executed_at': None, 'id': 'bb1f8d89-9bae-4080-b1b1-0fdf868d0553', 'machine_id': 'e3e6e280-0794-459f-84d5-5e468f60746e', 'parameters': {'operator_id': '1c6748d7-5cb2-444c-8e2e-416c14f5d6dd', 'recipe_id': '5c868417-ddcb-4f0a-b684-f1397ccd04e5'}, 'recipe_step_id': None, 'status': 'pending', 'type': 'start_recipe', 'updated_at': '2025-09-20T15:00:34.142317+00:00'}, 'columns': [{'name': 'type', 'type': 'varchar'}, {'name': 'parameters', 'type': 'jsonb'}, {'name': 'status', 'type': 'varchar'}, {'name': 'created_at', 'type': 'timestamptz'}, {'name': 'updated_at', 'type': 'timestamptz'}, {'name': 'executed_at', 'type': 'timestamptz'}, {'name': 'error_message', 'type': 'text'}, {'name': 'machine_id', 'type': 'uuid'}, {'name': 'recipe_step_id', 'type': 'uuid'}, {'name': 'id', 'type': 'uuid'}], 'errors': None, 'schema': 'public', 'commit_timestamp': '2025-09-20T15:00:34.144Z'}, 'ids': [47688524]}
2025-09-20 18:00:34,196 - machine_control - INFO - Received command payload
2025-09-20 18:00:34,196 - machine_control - INFO - New pending command: bb1f8d89-9bae-4080-b1b1-0fdf868d0553, type: start_recipe
2025-09-20 18:00:34,308 - machine_control - INFO - Command bb1f8d89-9bae-4080-b1b1-0fdf868d0553 already claimed or status changed
2025-09-20 18:00:38,043 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:00:38,143 - machine_control - INFO - No pending commands found
2025-09-20 18:00:41,147 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 455s
2025-09-20 18:00:43,145 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:00:43,376 - machine_control - INFO - No pending commands found
2025-09-20 18:00:48,377 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:00:48,614 - machine_control - INFO - No pending commands found
2025-09-20 18:00:51,455 - machine_control - INFO - Received insert event: {'data': {'table': 'recipe_commands', 'type': 'INSERT', 'record': {'created_at': '2025-09-20T15:00:51.443979+00:00', 'error_message': None, 'executed_at': None, 'id': '4905a379-c58d-4ce7-9662-ac83df62df45', 'machine_id': 'e3e6e280-0794-459f-84d5-5e468f60746e', 'parameters': {'operator_id': '7b88008e-89f2-4316-8ab3-462ca0cc5854', 'recipe_id': '364a3703-7eee-42e8-9f1e-015c4c403103'}, 'recipe_step_id': None, 'status': 'pending', 'type': 'start_recipe', 'updated_at': '2025-09-20T15:00:51.443979+00:00'}, 'columns': [{'name': 'type', 'type': 'varchar'}, {'name': 'parameters', 'type': 'jsonb'}, {'name': 'status', 'type': 'varchar'}, {'name': 'created_at', 'type': 'timestamptz'}, {'name': 'updated_at', 'type': 'timestamptz'}, {'name': 'executed_at', 'type': 'timestamptz'}, {'name': 'error_message', 'type': 'text'}, {'name': 'machine_id', 'type': 'uuid'}, {'name': 'recipe_step_id', 'type': 'uuid'}, {'name': 'id', 'type': 'uuid'}], 'errors': None, 'schema': 'public', 'commit_timestamp': '2025-09-20T15:00:51.445Z'}, 'ids': [47688524]}
2025-09-20 18:00:51,455 - machine_control - INFO - Received command payload
2025-09-20 18:00:51,455 - machine_control - INFO - New pending command: 4905a379-c58d-4ce7-9662-ac83df62df45, type: start_recipe
2025-09-20 18:00:51,615 - machine_control - INFO - Command 4905a379-c58d-4ce7-9662-ac83df62df45 already claimed or status changed
2025-09-20 18:00:53,616 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:00:53,807 - machine_control - INFO - No pending commands found
2025-09-20 18:00:58,809 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:00:59,105 - machine_control - INFO - No pending commands found
2025-09-20 18:01:04,106 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:01:04,427 - machine_control - INFO - No pending commands found
2025-09-20 18:01:09,429 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:01:09,530 - machine_control - INFO - No pending commands found
2025-09-20 18:01:11,532 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 485s
2025-09-20 18:01:14,532 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:01:14,766 - machine_control - INFO - No pending commands found
2025-09-20 18:01:19,768 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:01:19,999 - machine_control - INFO - No pending commands found
2025-09-20 18:01:25,001 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:01:25,274 - machine_control - INFO - No pending commands found
2025-09-20 18:01:30,276 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:01:30,520 - machine_control - INFO - No pending commands found
2025-09-20 18:01:35,522 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:01:35,768 - machine_control - INFO - No pending commands found
2025-09-20 18:01:40,770 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:01:41,023 - machine_control - INFO - No pending commands found
2025-09-20 18:01:42,024 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 515s
2025-09-20 18:01:46,024 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:01:46,253 - machine_control - INFO - No pending commands found
2025-09-20 18:01:51,254 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:01:51,499 - machine_control - INFO - No pending commands found
2025-09-20 18:01:56,500 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:01:56,743 - machine_control - INFO - No pending commands found
2025-09-20 18:02:01,745 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:02:01,980 - machine_control - INFO - No pending commands found
2025-09-20 18:02:06,982 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:02:07,253 - machine_control - INFO - No pending commands found
2025-09-20 18:02:12,254 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:02:12,359 - machine_control - INFO - No pending commands found
2025-09-20 18:02:12,360 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 546s
2025-09-20 18:02:17,361 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:02:17,707 - machine_control - INFO - No pending commands found
2025-09-20 18:02:22,709 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:02:22,958 - machine_control - INFO - No pending commands found
2025-09-20 18:02:26,563 - machine_control - INFO - Received insert event: {'data': {'table': 'recipe_commands', 'type': 'INSERT', 'record': {'created_at': '2025-09-20T15:02:26.470822+00:00', 'error_message': None, 'executed_at': None, 'id': 'cd2cb0fb-1184-4b4d-a498-c1a98ecf1f10', 'machine_id': 'e3e6e280-0794-459f-84d5-5e468f60746e', 'parameters': {'operator_id': '7b88008e-89f2-4316-8ab3-462ca0cc5854', 'recipe_id': '5c868417-ddcb-4f0a-b684-f1397ccd04e5'}, 'recipe_step_id': None, 'status': 'pending', 'type': 'start_recipe', 'updated_at': '2025-09-20T15:02:26.470822+00:00'}, 'columns': [{'name': 'type', 'type': 'varchar'}, {'name': 'parameters', 'type': 'jsonb'}, {'name': 'status', 'type': 'varchar'}, {'name': 'created_at', 'type': 'timestamptz'}, {'name': 'updated_at', 'type': 'timestamptz'}, {'name': 'executed_at', 'type': 'timestamptz'}, {'name': 'error_message', 'type': 'text'}, {'name': 'machine_id', 'type': 'uuid'}, {'name': 'recipe_step_id', 'type': 'uuid'}, {'name': 'id', 'type': 'uuid'}], 'errors': None, 'schema': 'public', 'commit_timestamp': '2025-09-20T15:02:26.476Z'}, 'ids': [47688524]}
2025-09-20 18:02:26,564 - machine_control - INFO - Received command payload
2025-09-20 18:02:26,564 - machine_control - INFO - New pending command: cd2cb0fb-1184-4b4d-a498-c1a98ecf1f10, type: start_recipe
2025-09-20 18:02:26,754 - machine_control - INFO - Command cd2cb0fb-1184-4b4d-a498-c1a98ecf1f10 already claimed or status changed
2025-09-20 18:02:27,960 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:02:28,058 - machine_control - INFO - No pending commands found
2025-09-20 18:02:33,060 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:02:33,335 - machine_control - INFO - No pending commands found
2025-09-20 18:02:38,336 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:02:38,557 - machine_control - INFO - No pending commands found
2025-09-20 18:02:42,560 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 576s
2025-09-20 18:02:43,558 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:02:43,792 - machine_control - INFO - No pending commands found
2025-09-20 18:02:48,793 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:02:49,009 - machine_control - INFO - No pending commands found
2025-09-20 18:02:54,010 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:02:54,355 - machine_control - INFO - No pending commands found
2025-09-20 18:02:59,356 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:02:59,575 - machine_control - INFO - No pending commands found
2025-09-20 18:03:04,576 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:03:04,820 - machine_control - INFO - No pending commands found
2025-09-20 18:03:09,821 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:03:09,923 - machine_control - INFO - No pending commands found
2025-09-20 18:03:12,985 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 606s
2025-09-20 18:03:14,924 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:03:15,158 - machine_control - INFO - No pending commands found
2025-09-20 18:03:20,159 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:03:20,858 - machine_control - INFO - No pending commands found
2025-09-20 18:03:25,859 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:03:26,178 - machine_control - INFO - No pending commands found
2025-09-20 18:03:31,179 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:03:31,519 - machine_control - INFO - No pending commands found
2025-09-20 18:03:33,093 - machine_control - INFO - Received insert event: {'data': {'table': 'recipe_commands', 'type': 'INSERT', 'record': {'created_at': '2025-09-20T15:03:33.08591+00:00', 'error_message': None, 'executed_at': None, 'id': '97720fc9-efe8-4d66-8dbf-92bd1435e0a8', 'machine_id': 'e3e6e280-0794-459f-84d5-5e468f60746e', 'parameters': {'operator_id': '7b88008e-89f2-4316-8ab3-462ca0cc5854', 'recipe_id': '5c868417-ddcb-4f0a-b684-f1397ccd04e5'}, 'recipe_step_id': None, 'status': 'pending', 'type': 'start_recipe', 'updated_at': '2025-09-20T15:03:33.08591+00:00'}, 'columns': [{'name': 'type', 'type': 'varchar'}, {'name': 'parameters', 'type': 'jsonb'}, {'name': 'status', 'type': 'varchar'}, {'name': 'created_at', 'type': 'timestamptz'}, {'name': 'updated_at', 'type': 'timestamptz'}, {'name': 'executed_at', 'type': 'timestamptz'}, {'name': 'error_message', 'type': 'text'}, {'name': 'machine_id', 'type': 'uuid'}, {'name': 'recipe_step_id', 'type': 'uuid'}, {'name': 'id', 'type': 'uuid'}], 'errors': None, 'schema': 'public', 'commit_timestamp': '2025-09-20T15:03:33.088Z'}, 'ids': [47688524]}
2025-09-20 18:03:33,101 - machine_control - INFO - Received command payload
2025-09-20 18:03:33,102 - machine_control - INFO - New pending command: 97720fc9-efe8-4d66-8dbf-92bd1435e0a8, type: start_recipe
2025-09-20 18:03:33,269 - machine_control - INFO - Command 97720fc9-efe8-4d66-8dbf-92bd1435e0a8 already claimed or status changed
2025-09-20 18:03:36,520 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:03:36,664 - machine_control - INFO - No pending commands found
2025-09-20 18:03:41,665 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:03:41,909 - machine_control - INFO - No pending commands found
2025-09-20 18:03:43,911 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 637s
2025-09-20 18:03:46,910 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:03:47,121 - machine_control - INFO - No pending commands found
2025-09-20 18:03:52,123 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:03:52,381 - machine_control - INFO - No pending commands found
2025-09-20 18:03:57,383 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:03:57,635 - machine_control - INFO - No pending commands found
2025-09-20 18:04:02,638 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:04:02,904 - machine_control - INFO - No pending commands found
2025-09-20 18:04:08,017 - machine_control - INFO - ALD Control System starting via CLI
2025-09-20 18:04:08,017 - machine_control - INFO - Effective Config -> PLC: simulation, IP: -, Port: -, Hostname: -, Auto-discover: false, LogLevel: INFO, LogFile: main_service.log
2025-09-20 18:04:08,187 - machine_control - INFO - Starting machine control application
2025-09-20 18:04:08,187 - machine_control - INFO - Attempting initial PLC connection...
2025-09-20 18:04:08,187 - machine_control - INFO - Initializing PLC of type simulation
2025-09-20 18:04:08,187 - machine_control - INFO - Creating simulation PLC
2025-09-20 18:04:08,187 - machine_control - INFO - Initializing simulation PLC
2025-09-20 18:04:08,187 - machine_control - INFO - Initializing Supabase client with URL: https://yceyfsqusdmcwgkwxcnt.supabase.co
2025-09-20 18:04:08,187 - machine_control - INFO - API Key (first 10 chars): eyJhbGciOi...
2025-09-20 18:04:08,229 - machine_control - INFO - Supabase client initialized successfully
2025-09-20 18:04:08,502 - machine_control - INFO - Simulation PLC initialized
2025-09-20 18:04:08,503 - machine_control - INFO - ✅ PLC connection initialized successfully
2025-09-20 18:04:08,503 - machine_control - INFO - Service starting with PLC connected: True
2025-09-20 18:04:08,503 - machine_control - INFO - Creating async Supabase client...
2025-09-20 18:04:08,503 - machine_control - INFO - Initializing async Supabase client with URL: https://yceyfsqusdmcwgkwxcnt.supabase.co
2025-09-20 18:04:08,503 - machine_control - INFO - API Key (first 10 chars): eyJhbGciOi...
2025-09-20 18:04:08,511 - machine_control - INFO - Async Supabase client initialized successfully
2025-09-20 18:04:08,511 - machine_control - INFO - Started 3 agents: connection-monitor, command-listener, parameter-control-listener
2025-09-20 18:04:08,511 - machine_control - INFO - Machine control application running
2025-09-20 18:04:08,511 - machine_control - INFO - ============================================================
2025-09-20 18:04:08,511 - machine_control - INFO - System Status:
2025-09-20 18:04:08,511 - machine_control - INFO - ❌ Disconnected
2025-09-20 18:04:08,511 - machine_control - INFO - ⚠️ Using Polling
2025-09-20 18:04:08,511 - machine_control - INFO -   - Machine ID: e3e6e280-0794-459f-84d5-5e468f60746e
2025-09-20 18:04:08,511 - machine_control - INFO - ============================================================
2025-09-20 18:04:08,511 - machine_control - INFO - Service is ready to receive commands
2025-09-20 18:04:08,512 - machine_control - INFO - [agent:connection-monitor] starting
2025-09-20 18:04:08,512 - machine_control - INFO - Starting connection monitor...
2025-09-20 18:04:08,512 - machine_control - INFO - Connection monitor started
2025-09-20 18:04:08,512 - machine_control - INFO - [agent:command-listener] starting
2025-09-20 18:04:08,512 - machine_control - INFO - Setting up command listener...
2025-09-20 18:04:08,512 - machine_control - INFO - Subscribing to INSERT events on recipe_commands table...
2025-09-20 18:04:08,517 - machine_control - INFO - [agent:parameter-control-listener] starting
2025-09-20 18:04:08,518 - machine_control - INFO - Setting up parameter control listener with realtime support...
2025-09-20 18:04:08,518 - machine_control - INFO - Setting up realtime subscriptions for parameter_control_commands table...
2025-09-20 18:04:08,518 - machine_control - INFO - Subscribing to realtime channel...
2025-09-20 18:04:08,518 - machine_control - INFO - ✅ PLC connection established
2025-09-20 18:04:09,102 - machine_control - INFO - Successfully subscribed to recipe_commands table
2025-09-20 18:04:09,103 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:04:09,209 - machine_control - INFO - No pending commands found
2025-09-20 18:04:09,209 - machine_control - INFO - Checked for existing pending commands
2025-09-20 18:04:09,209 - machine_control - INFO - Starting command polling as a fallback mechanism
2025-09-20 18:04:09,209 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:04:09,325 - machine_control - INFO - No pending commands found
2025-09-20 18:04:09,327 - machine_control - INFO - Successfully subscribed to realtime channel: parameter-control-commands-e3e6e280-0794-459f-84d5-5e468f60746e
2025-09-20 18:04:09,327 - machine_control - INFO - Starting realtime connection monitor
2025-09-20 18:04:09,327 - machine_control - INFO - Checking for existing pending parameter control commands...
2025-09-20 18:04:09,327 - machine_control - INFO - Checking for existing pending parameter control commands...
2025-09-20 18:04:09,424 - machine_control - INFO - Started parameter control command polling as fallback mechanism
2025-09-20 18:04:09,424 - machine_control - INFO - ✅ Parameter control listener ready with REALTIME + polling fallback
2025-09-20 18:04:09,425 - machine_control - INFO - Starting parameter command polling (interval: 10s, realtime: True)
2025-09-20 18:04:14,327 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:04:14,448 - machine_control - INFO - No pending commands found
2025-09-20 18:04:19,450 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:04:19,711 - machine_control - INFO - No pending commands found
2025-09-20 18:04:23,721 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 15s
2025-09-20 18:04:24,713 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:04:25,002 - machine_control - INFO - No pending commands found
2025-09-20 18:04:30,003 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:04:30,253 - machine_control - INFO - No pending commands found
2025-09-20 18:04:35,254 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:04:35,510 - machine_control - INFO - No pending commands found
2025-09-20 18:04:39,515 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 31s
2025-09-20 18:04:40,511 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:04:40,921 - machine_control - INFO - No pending commands found
2025-09-20 18:04:45,923 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:04:46,173 - machine_control - INFO - No pending commands found
2025-09-20 18:04:51,174 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:04:51,407 - machine_control - INFO - No pending commands found
2025-09-20 18:04:55,412 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 47s
2025-09-20 18:04:56,409 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:04:56,658 - machine_control - INFO - No pending commands found
2025-09-20 18:05:01,659 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:05:01,887 - machine_control - INFO - No pending commands found
2025-09-20 18:05:06,889 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:05:07,128 - machine_control - INFO - No pending commands found
2025-09-20 18:05:11,133 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 63s
2025-09-20 18:05:12,129 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:05:12,242 - machine_control - INFO - No pending commands found
2025-09-20 18:05:17,243 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:05:17,479 - machine_control - INFO - No pending commands found
2025-09-20 18:05:22,481 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:05:22,725 - machine_control - INFO - No pending commands found
2025-09-20 18:05:26,730 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 78s
2025-09-20 18:05:27,726 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:05:27,991 - machine_control - INFO - No pending commands found
2025-09-20 18:05:32,988 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:05:33,207 - machine_control - INFO - No pending commands found
2025-09-20 18:05:38,204 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:05:39,126 - machine_control - INFO - No pending commands found
2025-09-20 18:05:42,128 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 94s
2025-09-20 18:05:44,125 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:05:44,420 - machine_control - INFO - No pending commands found
2025-09-20 18:05:49,418 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:05:49,682 - machine_control - INFO - No pending commands found
2025-09-20 18:05:54,682 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:05:54,938 - machine_control - INFO - No pending commands found
2025-09-20 18:05:57,939 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 109s
2025-09-20 18:05:59,938 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:06:00,269 - machine_control - INFO - No pending commands found
2025-09-20 18:06:05,269 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:06:05,613 - machine_control - INFO - No pending commands found
2025-09-20 18:06:10,613 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:06:10,753 - machine_control - INFO - No pending commands found
2025-09-20 18:06:13,757 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 125s
2025-09-20 18:06:15,754 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:06:16,018 - machine_control - INFO - No pending commands found
2025-09-20 18:06:21,019 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:06:21,260 - machine_control - INFO - No pending commands found
2025-09-20 18:06:26,261 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:06:26,533 - machine_control - INFO - No pending commands found
2025-09-20 18:06:29,536 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 141s
2025-09-20 18:06:31,534 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:06:31,775 - machine_control - INFO - No pending commands found
2025-09-20 18:06:36,777 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:06:37,078 - machine_control - INFO - No pending commands found
2025-09-20 18:11:50,814 - machine_control - INFO - ALD Control System starting via CLI
2025-09-20 18:11:50,814 - machine_control - INFO - Effective Config -> PLC: simulation, IP: -, Port: -, Hostname: -, Auto-discover: false, LogLevel: INFO, LogFile: main_service.log
2025-09-20 18:11:51,032 - machine_control - INFO - Starting machine control application
2025-09-20 18:11:51,032 - machine_control - INFO - Attempting initial PLC connection...
2025-09-20 18:11:51,032 - machine_control - INFO - Initializing PLC of type simulation
2025-09-20 18:11:51,032 - machine_control - INFO - Creating simulation PLC
2025-09-20 18:11:51,032 - machine_control - INFO - Initializing simulation PLC
2025-09-20 18:11:51,032 - machine_control - INFO - Initializing Supabase client with URL: https://yceyfsqusdmcwgkwxcnt.supabase.co
2025-09-20 18:11:51,032 - machine_control - INFO - API Key (first 10 chars): eyJhbGciOi...
2025-09-20 18:11:51,082 - machine_control - INFO - Supabase client initialized successfully
2025-09-20 18:11:51,342 - machine_control - INFO - Simulation PLC initialized
2025-09-20 18:11:51,342 - machine_control - INFO - ✅ PLC connection initialized successfully
2025-09-20 18:11:51,342 - machine_control - INFO - Service starting with PLC connected: True
2025-09-20 18:11:51,342 - machine_control - INFO - Creating async Supabase client...
2025-09-20 18:11:51,342 - machine_control - INFO - Initializing async Supabase client with URL: https://yceyfsqusdmcwgkwxcnt.supabase.co
2025-09-20 18:11:51,342 - machine_control - INFO - API Key (first 10 chars): eyJhbGciOi...
2025-09-20 18:11:51,345 - machine_control - INFO - Async Supabase client initialized successfully
2025-09-20 18:11:51,345 - machine_control - INFO - Started 3 agents: connection-monitor, command-listener, parameter-control-listener
2025-09-20 18:11:51,345 - machine_control - INFO - Machine control application running
2025-09-20 18:11:51,345 - machine_control - INFO - ============================================================
2025-09-20 18:11:51,345 - machine_control - INFO - System Status:
2025-09-20 18:11:51,345 - machine_control - INFO - ❌ Disconnected
2025-09-20 18:11:51,345 - machine_control - INFO - ⚠️ Using Polling
2025-09-20 18:11:51,345 - machine_control - INFO -   - Machine ID: e3e6e280-0794-459f-84d5-5e468f60746e
2025-09-20 18:11:51,345 - machine_control - INFO - ============================================================
2025-09-20 18:11:51,345 - machine_control - INFO - Service is ready to receive commands
2025-09-20 18:11:51,345 - machine_control - INFO - [agent:connection-monitor] starting
2025-09-20 18:11:51,345 - machine_control - INFO - Starting connection monitor...
2025-09-20 18:11:51,345 - machine_control - INFO - Connection monitor started
2025-09-20 18:11:51,345 - machine_control - INFO - [agent:command-listener] starting
2025-09-20 18:11:51,345 - machine_control - INFO - Setting up command listener...
2025-09-20 18:11:51,345 - machine_control - INFO - Subscribing to INSERT events on recipe_commands table...
2025-09-20 18:11:51,348 - machine_control - INFO - [agent:parameter-control-listener] starting
2025-09-20 18:11:51,348 - machine_control - INFO - Setting up parameter control listener with realtime support...
2025-09-20 18:11:51,348 - machine_control - INFO - Setting up realtime subscriptions for parameter_control_commands table...
2025-09-20 18:11:51,348 - machine_control - INFO - Subscribing to realtime channel...
2025-09-20 18:11:51,348 - machine_control - INFO - ✅ PLC connection established
2025-09-20 18:11:51,914 - machine_control - INFO - Successfully subscribed to recipe_commands table
2025-09-20 18:11:51,915 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:11:52,028 - machine_control - INFO - No pending commands found
2025-09-20 18:11:52,028 - machine_control - INFO - Checked for existing pending commands
2025-09-20 18:11:52,028 - machine_control - INFO - Starting command polling as a fallback mechanism
2025-09-20 18:11:52,029 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:11:52,127 - machine_control - INFO - No pending commands found
2025-09-20 18:11:52,128 - machine_control - INFO - Successfully subscribed to realtime channel: parameter-control-commands-e3e6e280-0794-459f-84d5-5e468f60746e
2025-09-20 18:11:52,128 - machine_control - INFO - Starting realtime connection monitor
2025-09-20 18:11:52,128 - machine_control - INFO - Checking for existing pending parameter control commands...
2025-09-20 18:11:52,128 - machine_control - INFO - Checking for existing pending parameter control commands...
2025-09-20 18:11:52,227 - machine_control - INFO - Started parameter control command polling as fallback mechanism
2025-09-20 18:11:52,227 - machine_control - INFO - ✅ Parameter control listener ready with REALTIME + polling fallback
2025-09-20 18:11:52,227 - machine_control - INFO - Starting parameter command polling (interval: 10s, realtime: True)
2025-09-20 18:11:57,128 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:11:57,275 - machine_control - INFO - No pending commands found
2025-09-20 18:12:02,277 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:12:02,539 - machine_control - INFO - No pending commands found
2025-09-20 18:12:06,546 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 15s
2025-09-20 18:12:07,541 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:12:07,905 - machine_control - INFO - No pending commands found
2025-09-20 18:12:12,906 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:12:13,152 - machine_control - INFO - No pending commands found
2025-09-20 18:12:18,154 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:12:18,474 - machine_control - INFO - No pending commands found
2025-09-20 18:12:22,477 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 31s
2025-09-20 18:12:23,475 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:12:23,716 - machine_control - INFO - No pending commands found
2025-09-20 18:12:28,717 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:12:29,155 - machine_control - INFO - No pending commands found
2025-09-20 18:12:34,156 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:12:34,424 - machine_control - INFO - No pending commands found
2025-09-20 18:12:38,429 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 47s
2025-09-20 18:12:39,425 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:12:39,656 - machine_control - INFO - No pending commands found
2025-09-20 18:12:44,658 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:12:44,891 - machine_control - INFO - No pending commands found
2025-09-20 18:12:49,891 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:12:50,140 - machine_control - INFO - No pending commands found
2025-09-20 18:12:54,145 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 63s
2025-09-20 18:12:55,141 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:12:55,242 - machine_control - INFO - No pending commands found
2025-09-20 18:13:00,243 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:13:00,487 - machine_control - INFO - No pending commands found
2025-09-20 18:13:05,488 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:13:05,745 - machine_control - INFO - No pending commands found
2025-09-20 18:13:09,751 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 79s
2025-09-20 18:13:10,747 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:13:10,977 - machine_control - INFO - No pending commands found
2025-09-20 18:13:15,979 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:13:16,204 - machine_control - INFO - No pending commands found
2025-09-20 18:13:21,204 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:13:21,452 - machine_control - INFO - No pending commands found
2025-09-20 18:13:25,456 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 94s
2025-09-20 18:13:26,453 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:13:26,697 - machine_control - INFO - No pending commands found
2025-09-20 18:13:31,698 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:13:31,933 - machine_control - INFO - No pending commands found
2025-09-20 18:13:36,934 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:13:37,278 - machine_control - INFO - No pending commands found
2025-09-20 18:13:41,281 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 110s
2025-09-20 18:13:42,279 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:13:42,568 - machine_control - INFO - No pending commands found
2025-09-20 18:13:47,569 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:13:47,993 - machine_control - INFO - No pending commands found
2025-09-20 18:13:52,993 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:13:53,093 - machine_control - INFO - No pending commands found
2025-09-20 18:13:57,098 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 126s
2025-09-20 18:13:58,094 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:13:58,329 - machine_control - INFO - No pending commands found
2025-09-20 18:14:03,353 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:14:03,599 - machine_control - INFO - No pending commands found
2025-09-20 18:14:08,600 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:14:08,907 - machine_control - INFO - No pending commands found
2025-09-20 18:14:12,912 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 142s
2025-09-20 18:14:13,908 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:14:14,149 - machine_control - INFO - No pending commands found
2025-09-20 18:14:19,151 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:14:19,371 - machine_control - INFO - No pending commands found
2025-09-20 18:14:24,373 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:14:24,599 - machine_control - INFO - No pending commands found
2025-09-20 18:14:28,603 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 157s
2025-09-20 18:14:29,601 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:14:29,849 - machine_control - INFO - No pending commands found
2025-09-20 18:14:34,851 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:14:35,096 - machine_control - INFO - No pending commands found
2025-09-20 18:14:40,097 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:14:40,333 - machine_control - INFO - No pending commands found
2025-09-20 18:14:44,337 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 173s
2025-09-20 18:14:45,334 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:14:45,596 - machine_control - INFO - No pending commands found
2025-09-20 18:14:50,597 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:14:50,907 - machine_control - INFO - No pending commands found
2025-09-20 18:14:55,909 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:14:56,008 - machine_control - INFO - No pending commands found
2025-09-20 18:15:00,012 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 189s
2025-09-20 18:15:01,010 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:15:01,303 - machine_control - INFO - No pending commands found
2025-09-20 18:15:06,305 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:15:06,544 - machine_control - INFO - No pending commands found
2025-09-20 18:15:11,545 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:15:11,772 - machine_control - INFO - No pending commands found
2025-09-20 18:15:15,777 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 205s
2025-09-20 18:15:16,773 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:15:16,988 - machine_control - INFO - No pending commands found
2025-09-20 18:15:21,989 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:15:22,239 - machine_control - INFO - No pending commands found
2025-09-20 18:15:27,239 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:15:27,485 - machine_control - INFO - No pending commands found
2025-09-20 18:15:31,490 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 220s
2025-09-20 18:15:32,487 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:15:32,729 - machine_control - INFO - No pending commands found
2025-09-20 18:15:37,730 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:15:38,073 - machine_control - INFO - No pending commands found
2025-09-20 18:15:43,075 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:15:43,310 - machine_control - INFO - No pending commands found
2025-09-20 18:15:47,314 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 236s
2025-09-20 18:15:48,311 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:15:48,536 - machine_control - INFO - No pending commands found
2025-09-20 18:15:53,537 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:15:53,629 - machine_control - INFO - No pending commands found
2025-09-20 18:15:58,630 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:15:58,870 - machine_control - INFO - No pending commands found
2025-09-20 18:16:02,875 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 252s
2025-09-20 18:16:03,871 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:16:04,124 - machine_control - INFO - No pending commands found
2025-09-20 18:16:08,923 - machine_control - INFO - ALD Control System starting via CLI
2025-09-20 18:16:08,923 - machine_control - INFO - Effective Config -> PLC: simulation, IP: -, Port: -, Hostname: -, Auto-discover: false, LogLevel: INFO, LogFile: main_service.log
2025-09-20 18:16:09,135 - machine_control - INFO - Starting machine control application
2025-09-20 18:16:09,135 - machine_control - INFO - Attempting initial PLC connection...
2025-09-20 18:16:09,135 - machine_control - INFO - Initializing PLC of type simulation
2025-09-20 18:16:09,135 - machine_control - INFO - Creating simulation PLC
2025-09-20 18:16:09,135 - machine_control - INFO - Initializing simulation PLC
2025-09-20 18:16:09,135 - machine_control - INFO - Initializing Supabase client with URL: https://yceyfsqusdmcwgkwxcnt.supabase.co
2025-09-20 18:16:09,135 - machine_control - INFO - API Key (first 10 chars): eyJhbGciOi...
2025-09-20 18:16:09,180 - machine_control - INFO - Supabase client initialized successfully
2025-09-20 18:16:09,552 - machine_control - INFO - Simulation PLC initialized
2025-09-20 18:16:09,553 - machine_control - INFO - ✅ PLC connection initialized successfully
2025-09-20 18:16:09,553 - machine_control - INFO - Service starting with PLC connected: True
2025-09-20 18:16:09,553 - machine_control - INFO - Creating async Supabase client...
2025-09-20 18:16:09,553 - machine_control - INFO - Initializing async Supabase client with URL: https://yceyfsqusdmcwgkwxcnt.supabase.co
2025-09-20 18:16:09,553 - machine_control - INFO - API Key (first 10 chars): eyJhbGciOi...
2025-09-20 18:16:09,556 - machine_control - INFO - Async Supabase client initialized successfully
2025-09-20 18:16:09,556 - machine_control - INFO - Started 3 agents: connection-monitor, command-listener, parameter-control-listener
2025-09-20 18:16:09,556 - machine_control - INFO - Machine control application running
2025-09-20 18:16:09,556 - machine_control - INFO - ============================================================
2025-09-20 18:16:09,556 - machine_control - INFO - System Status:
2025-09-20 18:16:09,556 - machine_control - INFO - ❌ Disconnected
2025-09-20 18:16:09,556 - machine_control - INFO - ⚠️ Using Polling
2025-09-20 18:16:09,556 - machine_control - INFO -   - Machine ID: e3e6e280-0794-459f-84d5-5e468f60746e
2025-09-20 18:16:09,556 - machine_control - INFO - ============================================================
2025-09-20 18:16:09,556 - machine_control - INFO - Service is ready to receive commands
2025-09-20 18:16:09,556 - machine_control - INFO - [agent:connection-monitor] starting
2025-09-20 18:16:09,556 - machine_control - INFO - Starting connection monitor...
2025-09-20 18:16:09,556 - machine_control - INFO - Connection monitor started
2025-09-20 18:16:09,556 - machine_control - INFO - [agent:command-listener] starting
2025-09-20 18:16:09,556 - machine_control - INFO - Setting up command listener...
2025-09-20 18:16:09,556 - machine_control - INFO - Subscribing to INSERT events on recipe_commands table...
2025-09-20 18:16:09,558 - machine_control - INFO - [agent:parameter-control-listener] starting
2025-09-20 18:16:09,558 - machine_control - INFO - Setting up parameter control listener with realtime support...
2025-09-20 18:16:09,558 - machine_control - INFO - Setting up realtime subscriptions for parameter_control_commands table...
2025-09-20 18:16:09,558 - machine_control - INFO - Subscribing to realtime channel...
2025-09-20 18:16:09,558 - machine_control - INFO - ✅ PLC connection established
2025-09-20 18:16:10,297 - machine_control - INFO - Successfully subscribed to realtime channel: parameter-control-commands-e3e6e280-0794-459f-84d5-5e468f60746e
2025-09-20 18:16:10,297 - machine_control - INFO - Starting realtime connection monitor
2025-09-20 18:16:10,297 - machine_control - INFO - Checking for existing pending parameter control commands...
2025-09-20 18:16:10,298 - machine_control - INFO - Checking for existing pending parameter control commands...
2025-09-20 18:16:10,409 - machine_control - INFO - Started parameter control command polling as fallback mechanism
2025-09-20 18:16:10,409 - machine_control - INFO - ✅ Parameter control listener ready with REALTIME + polling fallback
2025-09-20 18:16:10,410 - machine_control - INFO - Starting parameter command polling (interval: 10s, realtime: True)
2025-09-20 18:16:10,411 - machine_control - INFO - Successfully subscribed to recipe_commands table
2025-09-20 18:16:10,411 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:16:10,599 - machine_control - INFO - No pending commands found
2025-09-20 18:16:10,599 - machine_control - INFO - Checked for existing pending commands
2025-09-20 18:16:10,599 - machine_control - INFO - Starting command polling as a fallback mechanism
2025-09-20 18:16:10,599 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:16:10,794 - machine_control - INFO - No pending commands found
2025-09-20 18:16:15,796 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:16:16,142 - machine_control - INFO - No pending commands found
2025-09-20 18:16:21,144 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:16:21,436 - machine_control - INFO - No pending commands found
2025-09-20 18:16:25,441 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 16s
2025-09-20 18:16:26,437 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:16:26,670 - machine_control - INFO - No pending commands found
2025-09-20 18:16:30,749 - machine_control - INFO - Received insert event: {'data': {'table': 'recipe_commands', 'type': 'INSERT', 'record': {'created_at': '2025-09-20T15:16:30.699129+00:00', 'error_message': None, 'executed_at': None, 'id': '45a1cf62-a193-4c23-a0f5-9a7f06e07128', 'machine_id': 'e3e6e280-0794-459f-84d5-5e468f60746e', 'parameters': {'operator_id': '8bc3b9f6-9aee-471b-b230-4f5baf6b27dd', 'recipe_id': 'b31987ad-f299-4b13-a43c-2c89767e6034'}, 'recipe_step_id': None, 'status': 'pending', 'type': 'start_recipe', 'updated_at': '2025-09-20T15:16:30.699129+00:00'}, 'columns': [{'name': 'type', 'type': 'varchar'}, {'name': 'parameters', 'type': 'jsonb'}, {'name': 'status', 'type': 'varchar'}, {'name': 'created_at', 'type': 'timestamptz'}, {'name': 'updated_at', 'type': 'timestamptz'}, {'name': 'executed_at', 'type': 'timestamptz'}, {'name': 'error_message', 'type': 'text'}, {'name': 'machine_id', 'type': 'uuid'}, {'name': 'recipe_step_id', 'type': 'uuid'}, {'name': 'id', 'type': 'uuid'}], 'errors': None, 'schema': 'public', 'commit_timestamp': '2025-09-20T15:16:30.705Z'}, 'ids': [47688524]}
2025-09-20 18:16:30,749 - machine_control - INFO - Received command payload
2025-09-20 18:16:30,750 - machine_control - INFO - New pending command: 45a1cf62-a193-4c23-a0f5-9a7f06e07128, type: start_recipe
2025-09-20 18:16:30,851 - machine_control - INFO - Command 45a1cf62-a193-4c23-a0f5-9a7f06e07128 already claimed or status changed
2025-09-20 18:16:31,672 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:16:31,774 - machine_control - INFO - No pending commands found
2025-09-20 18:16:36,775 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:16:37,008 - machine_control - INFO - No pending commands found
2025-09-20 18:16:41,014 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 32s
2025-09-20 18:16:42,010 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:16:42,261 - machine_control - INFO - No pending commands found
2025-09-20 18:16:47,263 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:16:47,523 - machine_control - INFO - No pending commands found
2025-09-20 18:16:52,524 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:16:52,806 - machine_control - INFO - No pending commands found
2025-09-20 18:16:56,811 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 47s
2025-09-20 18:16:57,808 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:16:58,049 - machine_control - INFO - No pending commands found
2025-09-20 18:17:03,050 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:17:03,297 - machine_control - INFO - No pending commands found
2025-09-20 18:17:08,299 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:17:08,538 - machine_control - INFO - No pending commands found
2025-09-20 18:17:12,542 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 63s
2025-09-20 18:17:13,539 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:17:13,637 - machine_control - INFO - No pending commands found
2025-09-20 18:17:18,638 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:17:18,877 - machine_control - INFO - No pending commands found
2025-09-20 18:17:23,878 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:17:24,171 - machine_control - INFO - No pending commands found
2025-09-20 18:17:28,175 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 79s
2025-09-20 18:17:29,172 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:17:29,453 - machine_control - INFO - No pending commands found
2025-09-20 18:17:34,454 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:17:34,878 - machine_control - INFO - No pending commands found
2025-09-20 18:17:39,878 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:17:40,121 - machine_control - INFO - No pending commands found
2025-09-20 18:17:44,126 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 95s
2025-09-20 18:17:45,122 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:17:45,366 - machine_control - INFO - No pending commands found
2025-09-20 18:17:50,367 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:17:50,634 - machine_control - INFO - No pending commands found
2025-09-20 18:17:55,636 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:17:55,883 - machine_control - INFO - No pending commands found
2025-09-20 18:17:59,888 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 111s
2025-09-20 18:18:00,884 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:18:01,148 - machine_control - INFO - No pending commands found
2025-09-20 18:18:06,150 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:18:06,418 - machine_control - INFO - No pending commands found
2025-09-20 18:18:11,418 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:18:11,520 - machine_control - INFO - No pending commands found
2025-09-20 18:18:15,524 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 126s
2025-09-20 18:18:16,521 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:18:16,757 - machine_control - INFO - No pending commands found
2025-09-20 18:18:21,758 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:18:22,096 - machine_control - INFO - No pending commands found
2025-09-20 18:18:27,096 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:18:27,418 - machine_control - INFO - No pending commands found
2025-09-20 18:18:31,423 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 142s
2025-09-20 18:18:32,419 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:18:32,667 - machine_control - INFO - No pending commands found
2025-09-20 18:18:37,669 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:18:37,908 - machine_control - INFO - No pending commands found
2025-09-20 18:18:42,909 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:18:43,231 - machine_control - INFO - No pending commands found
2025-09-20 18:18:47,236 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 158s
2025-09-20 18:18:48,233 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:18:48,576 - machine_control - INFO - No pending commands found
2025-09-20 18:18:53,578 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:18:53,868 - machine_control - INFO - No pending commands found
2025-09-20 18:18:58,766 - machine_control - INFO - Received insert event: {'data': {'table': 'recipe_commands', 'type': 'INSERT', 'record': {'created_at': '2025-09-20T15:18:58.803059+00:00', 'error_message': None, 'executed_at': None, 'id': '6520c6d6-ad2f-47de-bda6-812a05a6d99f', 'machine_id': 'e3e6e280-0794-459f-84d5-5e468f60746e', 'parameters': {'operator_id': '8bc3b9f6-9aee-471b-b230-4f5baf6b27dd', 'recipe_id': 'b31987ad-f299-4b13-a43c-2c89767e6034'}, 'recipe_step_id': None, 'status': 'pending', 'type': 'start_recipe', 'updated_at': '2025-09-20T15:18:58.803059+00:00'}, 'columns': [{'name': 'type', 'type': 'varchar'}, {'name': 'parameters', 'type': 'jsonb'}, {'name': 'status', 'type': 'varchar'}, {'name': 'created_at', 'type': 'timestamptz'}, {'name': 'updated_at', 'type': 'timestamptz'}, {'name': 'executed_at', 'type': 'timestamptz'}, {'name': 'error_message', 'type': 'text'}, {'name': 'machine_id', 'type': 'uuid'}, {'name': 'recipe_step_id', 'type': 'uuid'}, {'name': 'id', 'type': 'uuid'}], 'errors': None, 'schema': 'public', 'commit_timestamp': '2025-09-20T15:18:58.805Z'}, 'ids': [47688524]}
2025-09-20 18:18:58,766 - machine_control - INFO - Received command payload
2025-09-20 18:18:58,766 - machine_control - INFO - New pending command: 6520c6d6-ad2f-47de-bda6-812a05a6d99f, type: start_recipe
2025-09-20 18:18:58,938 - machine_control - INFO - Command 6520c6d6-ad2f-47de-bda6-812a05a6d99f already claimed or status changed
2025-09-20 18:18:58,938 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:18:59,052 - machine_control - INFO - No pending commands found
2025-09-20 18:19:03,056 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 174s
2025-09-20 18:19:04,053 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:19:04,293 - machine_control - INFO - No pending commands found
2025-09-20 18:19:09,294 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:19:09,531 - machine_control - INFO - No pending commands found
2025-09-20 18:19:13,071 - machine_control - INFO - Received insert event: {'data': {'table': 'recipe_commands', 'type': 'INSERT', 'record': {'created_at': '2025-09-20T15:19:13.141104+00:00', 'error_message': None, 'executed_at': None, 'id': 'ddb45480-a983-4615-b4d7-e055dc71cbe6', 'machine_id': 'e3e6e280-0794-459f-84d5-5e468f60746e', 'parameters': {'process_id': '8a6a55fd-1570-4b63-8a82-f02384d7e36c'}, 'recipe_step_id': None, 'status': 'pending', 'type': 'stop_recipe', 'updated_at': '2025-09-20T15:19:13.141104+00:00'}, 'columns': [{'name': 'type', 'type': 'varchar'}, {'name': 'parameters', 'type': 'jsonb'}, {'name': 'status', 'type': 'varchar'}, {'name': 'created_at', 'type': 'timestamptz'}, {'name': 'updated_at', 'type': 'timestamptz'}, {'name': 'executed_at', 'type': 'timestamptz'}, {'name': 'error_message', 'type': 'text'}, {'name': 'machine_id', 'type': 'uuid'}, {'name': 'recipe_step_id', 'type': 'uuid'}, {'name': 'id', 'type': 'uuid'}], 'errors': None, 'schema': 'public', 'commit_timestamp': '2025-09-20T15:19:13.143Z'}, 'ids': [47688524]}
2025-09-20 18:19:13,071 - machine_control - INFO - Received command payload
2025-09-20 18:19:13,071 - machine_control - INFO - New pending command: ddb45480-a983-4615-b4d7-e055dc71cbe6, type: stop_recipe
2025-09-20 18:19:13,187 - machine_control - INFO - Command ddb45480-a983-4615-b4d7-e055dc71cbe6 already claimed or status changed
2025-09-20 18:19:14,532 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:19:14,644 - machine_control - INFO - No pending commands found
2025-09-20 18:19:18,648 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 189s
2025-09-20 18:19:19,644 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:19:19,887 - machine_control - INFO - No pending commands found
2025-09-20 18:19:24,887 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:19:25,158 - machine_control - INFO - No pending commands found
2025-09-20 18:19:30,159 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:19:30,381 - machine_control - INFO - No pending commands found
2025-09-20 18:19:34,386 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 205s
2025-09-20 18:19:35,382 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:19:35,614 - machine_control - INFO - No pending commands found
2025-09-20 18:19:40,615 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:19:40,900 - machine_control - INFO - No pending commands found
2025-09-20 18:19:45,901 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:19:46,134 - machine_control - INFO - No pending commands found
2025-09-20 18:19:50,138 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 221s
2025-09-20 18:19:51,135 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:19:51,370 - machine_control - INFO - No pending commands found
2025-09-20 18:19:56,370 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:19:56,664 - machine_control - INFO - No pending commands found
2025-09-20 18:20:01,666 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:20:01,977 - machine_control - INFO - No pending commands found
2025-09-20 18:20:05,982 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 237s
2025-09-20 18:20:06,979 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:20:07,319 - machine_control - INFO - No pending commands found
2025-09-20 18:20:12,320 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:20:12,431 - machine_control - INFO - No pending commands found
2025-09-20 18:20:17,432 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:20:17,705 - machine_control - INFO - No pending commands found
2025-09-20 18:20:21,710 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 252s
2025-09-20 18:20:22,706 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:20:22,951 - machine_control - INFO - No pending commands found
2025-09-20 18:20:27,952 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:20:28,203 - machine_control - INFO - No pending commands found
2025-09-20 18:20:33,204 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:20:33,433 - machine_control - INFO - No pending commands found
2025-09-20 18:20:37,437 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 268s
2025-09-20 18:20:38,434 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:20:38,666 - machine_control - INFO - No pending commands found
2025-09-20 18:20:43,667 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:20:43,881 - machine_control - INFO - No pending commands found
2025-09-20 18:20:48,883 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:20:49,128 - machine_control - INFO - No pending commands found
2025-09-20 18:20:53,133 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 284s
2025-09-20 18:20:54,129 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:20:54,397 - machine_control - INFO - No pending commands found
2025-09-20 18:20:59,397 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:20:59,652 - machine_control - INFO - No pending commands found
2025-09-20 18:21:04,653 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:21:05,031 - machine_control - INFO - No pending commands found
2025-09-20 18:21:09,036 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 300s
2025-09-20 18:21:10,032 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:21:10,264 - machine_control - INFO - No pending commands found
2025-09-20 18:21:15,265 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:21:15,369 - machine_control - INFO - No pending commands found
2025-09-20 18:21:20,370 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:21:20,713 - machine_control - INFO - No pending commands found
2025-09-20 18:21:24,718 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 315s
2025-09-20 18:21:25,714 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:21:25,960 - machine_control - INFO - No pending commands found
2025-09-20 18:21:30,961 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:21:31,181 - machine_control - INFO - No pending commands found
2025-09-20 18:21:36,182 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:21:36,406 - machine_control - INFO - No pending commands found
2025-09-20 18:21:40,410 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 331s
2025-09-20 18:21:41,407 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:21:41,672 - machine_control - INFO - No pending commands found
2025-09-20 18:21:46,673 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:21:46,896 - machine_control - INFO - No pending commands found
2025-09-20 18:21:51,897 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:21:52,102 - machine_control - INFO - No pending commands found
2025-09-20 18:21:56,106 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 347s
2025-09-20 18:21:57,104 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:21:57,362 - machine_control - INFO - No pending commands found
2025-09-20 18:22:02,363 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:22:02,604 - machine_control - INFO - No pending commands found
2025-09-20 18:22:07,605 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:22:07,831 - machine_control - INFO - No pending commands found
2025-09-20 18:22:11,836 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 362s
2025-09-20 18:22:12,832 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:22:12,931 - machine_control - INFO - No pending commands found
2025-09-20 18:22:17,932 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:22:18,167 - machine_control - INFO - No pending commands found
2025-09-20 18:22:21,942 - machine_control - INFO - ALD Control System starting via CLI
2025-09-20 18:22:21,942 - machine_control - INFO - Effective Config -> PLC: simulation, IP: -, Port: -, Hostname: -, Auto-discover: false, LogLevel: INFO, LogFile: main_service.log
2025-09-20 18:22:22,123 - machine_control - INFO - Starting machine control application
2025-09-20 18:22:22,123 - machine_control - INFO - Attempting initial PLC connection...
2025-09-20 18:22:22,123 - machine_control - INFO - Initializing PLC of type simulation
2025-09-20 18:22:22,123 - machine_control - INFO - Creating simulation PLC
2025-09-20 18:22:22,123 - machine_control - INFO - Initializing simulation PLC
2025-09-20 18:22:22,123 - machine_control - INFO - Initializing Supabase client with URL: https://yceyfsqusdmcwgkwxcnt.supabase.co
2025-09-20 18:22:22,123 - machine_control - INFO - API Key (first 10 chars): eyJhbGciOi...
2025-09-20 18:22:22,167 - machine_control - INFO - Supabase client initialized successfully
2025-09-20 18:22:22,436 - machine_control - INFO - Simulation PLC initialized
2025-09-20 18:22:22,436 - machine_control - INFO - ✅ PLC connection initialized successfully
2025-09-20 18:22:22,436 - machine_control - INFO - Service starting with PLC connected: True
2025-09-20 18:22:22,436 - machine_control - INFO - Creating async Supabase client...
2025-09-20 18:22:22,436 - machine_control - INFO - Initializing async Supabase client with URL: https://yceyfsqusdmcwgkwxcnt.supabase.co
2025-09-20 18:22:22,436 - machine_control - INFO - API Key (first 10 chars): eyJhbGciOi...
2025-09-20 18:22:22,440 - machine_control - INFO - Async Supabase client initialized successfully
2025-09-20 18:22:22,440 - machine_control - INFO - Started 3 agents: connection-monitor, command-listener, parameter-control-listener
2025-09-20 18:22:22,440 - machine_control - INFO - Machine control application running
2025-09-20 18:22:22,440 - machine_control - INFO - ============================================================
2025-09-20 18:22:22,440 - machine_control - INFO - System Status:
2025-09-20 18:22:22,440 - machine_control - INFO - ❌ Disconnected
2025-09-20 18:22:22,440 - machine_control - INFO - ⚠️ Using Polling
2025-09-20 18:22:22,440 - machine_control - INFO -   - Machine ID: e3e6e280-0794-459f-84d5-5e468f60746e
2025-09-20 18:22:22,440 - machine_control - INFO - ============================================================
2025-09-20 18:22:22,440 - machine_control - INFO - Service is ready to receive commands
2025-09-20 18:22:22,440 - machine_control - INFO - [agent:connection-monitor] starting
2025-09-20 18:22:22,440 - machine_control - INFO - Starting connection monitor...
2025-09-20 18:22:22,440 - machine_control - INFO - Connection monitor started
2025-09-20 18:22:22,440 - machine_control - INFO - [agent:command-listener] starting
2025-09-20 18:22:22,440 - machine_control - INFO - Setting up command listener...
2025-09-20 18:22:22,440 - machine_control - INFO - Subscribing to INSERT events on recipe_commands table...
2025-09-20 18:22:22,444 - machine_control - INFO - [agent:parameter-control-listener] starting
2025-09-20 18:22:22,444 - machine_control - INFO - Setting up parameter control listener with realtime support...
2025-09-20 18:22:22,444 - machine_control - INFO - Setting up realtime subscriptions for parameter_control_commands table...
2025-09-20 18:22:22,444 - machine_control - INFO - Subscribing to realtime channel...
2025-09-20 18:22:22,444 - machine_control - INFO - ✅ PLC connection established
2025-09-20 18:22:23,007 - machine_control - INFO - Successfully subscribed to realtime channel: parameter-control-commands-e3e6e280-0794-459f-84d5-5e468f60746e
2025-09-20 18:22:23,007 - machine_control - INFO - Starting realtime connection monitor
2025-09-20 18:22:23,007 - machine_control - INFO - Checking for existing pending parameter control commands...
2025-09-20 18:22:23,007 - machine_control - INFO - Checking for existing pending parameter control commands...
2025-09-20 18:22:23,125 - machine_control - INFO - Started parameter control command polling as fallback mechanism
2025-09-20 18:22:23,125 - machine_control - INFO - ✅ Parameter control listener ready with REALTIME + polling fallback
2025-09-20 18:22:23,126 - machine_control - INFO - Starting parameter command polling (interval: 10s, realtime: True)
2025-09-20 18:22:23,127 - machine_control - INFO - Successfully subscribed to recipe_commands table
2025-09-20 18:22:23,127 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:22:23,241 - machine_control - INFO - No pending commands found
2025-09-20 18:22:23,241 - machine_control - INFO - Checked for existing pending commands
2025-09-20 18:22:23,241 - machine_control - INFO - Starting command polling as a fallback mechanism
2025-09-20 18:22:23,242 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:22:23,336 - machine_control - INFO - No pending commands found
2025-09-20 18:22:28,339 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:22:28,576 - machine_control - INFO - No pending commands found
2025-09-20 18:22:33,577 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:22:33,918 - machine_control - INFO - No pending commands found
2025-09-20 18:22:36,448 - machine_control - INFO - Received insert event: {'data': {'table': 'recipe_commands', 'type': 'INSERT', 'record': {'created_at': '2025-09-20T15:22:36.428758+00:00', 'error_message': None, 'executed_at': None, 'id': '66b8aa56-4bb7-407d-a027-2d3111cd61b3', 'machine_id': 'e3e6e280-0794-459f-84d5-5e468f60746e', 'parameters': {'operator_id': '8bc3b9f6-9aee-471b-b230-4f5baf6b27dd', 'recipe_id': 'b31987ad-f299-4b13-a43c-2c89767e6034'}, 'recipe_step_id': None, 'status': 'pending', 'type': 'start_recipe', 'updated_at': '2025-09-20T15:22:36.428758+00:00'}, 'columns': [{'name': 'type', 'type': 'varchar'}, {'name': 'parameters', 'type': 'jsonb'}, {'name': 'status', 'type': 'varchar'}, {'name': 'created_at', 'type': 'timestamptz'}, {'name': 'updated_at', 'type': 'timestamptz'}, {'name': 'executed_at', 'type': 'timestamptz'}, {'name': 'error_message', 'type': 'text'}, {'name': 'machine_id', 'type': 'uuid'}, {'name': 'recipe_step_id', 'type': 'uuid'}, {'name': 'id', 'type': 'uuid'}], 'errors': None, 'schema': 'public', 'commit_timestamp': '2025-09-20T15:22:36.431Z'}, 'ids': [47688524]}
2025-09-20 18:22:36,448 - machine_control - INFO - Received command payload
2025-09-20 18:22:36,448 - machine_control - INFO - New pending command: 66b8aa56-4bb7-407d-a027-2d3111cd61b3, type: start_recipe
2025-09-20 18:22:36,566 - machine_control - INFO - Command 66b8aa56-4bb7-407d-a027-2d3111cd61b3 already claimed or status changed
2025-09-20 18:22:37,922 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 16s
2025-09-20 18:22:38,833 - machine_control - INFO - Received insert event: {'data': {'table': 'recipe_commands', 'type': 'INSERT', 'record': {'created_at': '2025-09-20T15:22:38.832256+00:00', 'error_message': None, 'executed_at': None, 'id': '812717e9-5d98-4248-a8d3-dbf0d68242eb', 'machine_id': 'e3e6e280-0794-459f-84d5-5e468f60746e', 'parameters': {'process_id': '7f804c38-f2f8-4237-adbb-76a3bf03000e'}, 'recipe_step_id': None, 'status': 'pending', 'type': 'stop_recipe', 'updated_at': '2025-09-20T15:22:38.832256+00:00'}, 'columns': [{'name': 'type', 'type': 'varchar'}, {'name': 'parameters', 'type': 'jsonb'}, {'name': 'status', 'type': 'varchar'}, {'name': 'created_at', 'type': 'timestamptz'}, {'name': 'updated_at', 'type': 'timestamptz'}, {'name': 'executed_at', 'type': 'timestamptz'}, {'name': 'error_message', 'type': 'text'}, {'name': 'machine_id', 'type': 'uuid'}, {'name': 'recipe_step_id', 'type': 'uuid'}, {'name': 'id', 'type': 'uuid'}], 'errors': None, 'schema': 'public', 'commit_timestamp': '2025-09-20T15:22:38.836Z'}, 'ids': [47688524]}
2025-09-20 18:22:38,835 - machine_control - INFO - Received command payload
2025-09-20 18:22:38,835 - machine_control - INFO - New pending command: 812717e9-5d98-4248-a8d3-dbf0d68242eb, type: stop_recipe
2025-09-20 18:22:39,029 - machine_control - INFO - Command 812717e9-5d98-4248-a8d3-dbf0d68242eb already claimed or status changed
2025-09-20 18:22:39,031 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:22:39,133 - machine_control - INFO - No pending commands found
2025-09-20 18:22:44,134 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:22:44,417 - machine_control - INFO - No pending commands found
2025-09-20 18:22:49,418 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:22:49,683 - machine_control - INFO - No pending commands found
2025-09-20 18:22:53,687 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 31s
2025-09-20 18:22:54,684 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:22:54,894 - machine_control - INFO - No pending commands found
2025-09-20 18:22:59,896 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:23:00,153 - machine_control - INFO - No pending commands found
2025-09-20 18:23:05,155 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:23:05,397 - machine_control - INFO - No pending commands found
2025-09-20 18:23:09,402 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 47s
2025-09-20 18:23:10,398 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:23:10,625 - machine_control - INFO - No pending commands found
2025-09-20 18:23:15,626 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:23:15,871 - machine_control - INFO - No pending commands found
2025-09-20 18:23:20,872 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:23:21,132 - machine_control - INFO - No pending commands found
2025-09-20 18:23:25,137 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 63s
2025-09-20 18:23:26,134 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:23:26,235 - machine_control - INFO - No pending commands found
2025-09-20 18:23:31,237 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:23:31,467 - machine_control - INFO - No pending commands found
2025-09-20 18:23:36,468 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:23:36,707 - machine_control - INFO - No pending commands found
2025-09-20 18:23:40,711 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 78s
2025-09-20 18:23:41,708 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:23:41,937 - machine_control - INFO - No pending commands found
2025-09-20 18:23:46,938 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:23:47,310 - machine_control - INFO - No pending commands found
2025-09-20 18:23:52,311 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:23:52,588 - machine_control - INFO - No pending commands found
2025-09-20 18:23:56,592 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 94s
2025-09-20 18:23:57,588 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:23:57,901 - machine_control - INFO - No pending commands found
2025-09-20 18:24:02,903 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:24:03,147 - machine_control - INFO - No pending commands found
2025-09-20 18:24:08,148 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:24:08,482 - machine_control - INFO - No pending commands found
2025-09-20 18:24:12,487 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 110s
2025-09-20 18:24:13,484 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:24:13,724 - machine_control - INFO - No pending commands found
2025-09-20 18:24:18,725 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:24:18,964 - machine_control - INFO - No pending commands found
2025-09-20 18:24:23,965 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:24:24,063 - machine_control - INFO - No pending commands found
2025-09-20 18:24:28,068 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 126s
2025-09-20 18:24:29,065 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:24:29,292 - machine_control - INFO - No pending commands found
2025-09-20 18:24:34,293 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:24:34,556 - machine_control - INFO - No pending commands found
2025-09-20 18:24:39,557 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:24:39,814 - machine_control - INFO - No pending commands found
2025-09-20 18:24:43,823 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 141s
2025-09-20 18:24:44,817 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:24:45,055 - machine_control - INFO - No pending commands found
2025-09-20 18:24:50,057 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:24:50,289 - machine_control - INFO - No pending commands found
2025-09-20 18:24:55,291 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:24:55,556 - machine_control - INFO - No pending commands found
2025-09-20 18:24:59,561 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 157s
2025-09-20 18:25:00,557 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:25:00,796 - machine_control - INFO - No pending commands found
2025-09-20 18:25:05,797 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:25:06,125 - machine_control - INFO - No pending commands found
2025-09-20 18:25:11,127 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:25:11,465 - machine_control - INFO - No pending commands found
2025-09-20 18:25:15,470 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 173s
2025-09-20 18:25:16,466 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:25:16,804 - machine_control - INFO - No pending commands found
2025-09-20 18:25:21,651 - machine_control - INFO - Received insert event: {'data': {'table': 'recipe_commands', 'type': 'INSERT', 'record': {'created_at': '2025-09-20T15:25:21.693146+00:00', 'error_message': None, 'executed_at': None, 'id': 'e7cbe060-66bf-441e-be35-7df434d645a8', 'machine_id': 'e3e6e280-0794-459f-84d5-5e468f60746e', 'parameters': {'operator_id': '8bc3b9f6-9aee-471b-b230-4f5baf6b27dd', 'recipe_id': 'b31987ad-f299-4b13-a43c-2c89767e6034'}, 'recipe_step_id': None, 'status': 'pending', 'type': 'start_recipe', 'updated_at': '2025-09-20T15:25:21.693146+00:00'}, 'columns': [{'name': 'type', 'type': 'varchar'}, {'name': 'parameters', 'type': 'jsonb'}, {'name': 'status', 'type': 'varchar'}, {'name': 'created_at', 'type': 'timestamptz'}, {'name': 'updated_at', 'type': 'timestamptz'}, {'name': 'executed_at', 'type': 'timestamptz'}, {'name': 'error_message', 'type': 'text'}, {'name': 'machine_id', 'type': 'uuid'}, {'name': 'recipe_step_id', 'type': 'uuid'}, {'name': 'id', 'type': 'uuid'}], 'errors': None, 'schema': 'public', 'commit_timestamp': '2025-09-20T15:25:21.694Z'}, 'ids': [47688524]}
2025-09-20 18:25:21,652 - machine_control - INFO - Received command payload
2025-09-20 18:25:21,653 - machine_control - INFO - New pending command: e7cbe060-66bf-441e-be35-7df434d645a8, type: start_recipe
2025-09-20 18:25:21,844 - machine_control - INFO - Command e7cbe060-66bf-441e-be35-7df434d645a8 already claimed or status changed
2025-09-20 18:25:21,844 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:25:21,948 - machine_control - INFO - No pending commands found
2025-09-20 18:25:26,949 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:25:27,050 - machine_control - INFO - No pending commands found
2025-09-20 18:25:31,055 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 189s
2025-09-20 18:25:32,051 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:25:32,291 - machine_control - INFO - No pending commands found
2025-09-20 18:25:37,293 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:25:37,519 - machine_control - INFO - No pending commands found
2025-09-20 18:25:42,520 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:25:42,778 - machine_control - INFO - No pending commands found
2025-09-20 18:25:46,783 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 204s
2025-09-20 18:25:47,780 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:25:48,027 - machine_control - INFO - No pending commands found
2025-09-20 18:25:53,028 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:25:53,289 - machine_control - INFO - No pending commands found
2025-09-20 18:25:58,290 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:25:58,514 - machine_control - INFO - No pending commands found
2025-09-20 18:26:02,519 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 220s
2025-09-20 18:26:03,516 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:26:03,737 - machine_control - INFO - No pending commands found
2025-09-20 18:26:08,739 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:26:09,002 - machine_control - INFO - No pending commands found
2025-09-20 18:26:14,004 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:26:14,242 - machine_control - INFO - No pending commands found
2025-09-20 18:26:18,246 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 236s
2025-09-20 18:26:19,243 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:26:19,624 - machine_control - INFO - No pending commands found
2025-09-20 18:26:24,626 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:26:24,768 - machine_control - INFO - No pending commands found
2025-09-20 18:26:29,769 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:26:30,107 - machine_control - INFO - No pending commands found
2025-09-20 18:26:34,111 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 252s
2025-09-20 18:26:35,108 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:26:35,429 - machine_control - INFO - No pending commands found
2025-09-20 18:26:40,431 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:26:40,709 - machine_control - INFO - No pending commands found
2025-09-20 18:26:45,710 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:26:45,972 - machine_control - INFO - No pending commands found
2025-09-20 18:26:49,976 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 268s
2025-09-20 18:26:50,973 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:26:51,220 - machine_control - INFO - No pending commands found
2025-09-20 18:26:56,221 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:26:56,631 - machine_control - INFO - No pending commands found
2025-09-20 18:27:01,633 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:27:01,899 - machine_control - INFO - No pending commands found
2025-09-20 18:27:05,905 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 284s
2025-09-20 18:27:06,901 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:27:07,133 - machine_control - INFO - No pending commands found
2025-09-20 18:27:12,135 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:27:12,346 - machine_control - INFO - No pending commands found
2025-09-20 18:27:17,347 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:27:17,570 - machine_control - INFO - No pending commands found
2025-09-20 18:27:21,575 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 299s
2025-09-20 18:27:22,572 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:27:22,832 - machine_control - INFO - No pending commands found
2025-09-20 18:27:27,833 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:27:27,928 - machine_control - INFO - No pending commands found
2025-09-20 18:27:32,929 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:27:33,160 - machine_control - INFO - No pending commands found
2025-09-20 18:27:37,165 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 315s
2025-09-20 18:27:38,161 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:27:38,463 - machine_control - INFO - No pending commands found
2025-09-20 18:27:43,464 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:27:43,706 - machine_control - INFO - No pending commands found
2025-09-20 18:27:48,707 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:27:49,145 - machine_control - INFO - No pending commands found
2025-09-20 18:27:53,150 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 331s
2025-09-20 18:27:54,146 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:27:54,407 - machine_control - INFO - No pending commands found
2025-09-20 18:27:59,408 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:27:59,651 - machine_control - INFO - No pending commands found
2025-09-20 18:28:04,652 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:28:04,931 - machine_control - INFO - No pending commands found
2025-09-20 18:28:08,936 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 347s
2025-09-20 18:28:09,932 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:28:10,179 - machine_control - INFO - No pending commands found
2025-09-20 18:28:15,180 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:28:15,403 - machine_control - INFO - No pending commands found
2025-09-20 18:28:20,403 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:28:20,606 - machine_control - INFO - No pending commands found
2025-09-20 18:28:24,610 - machine_control - INFO - [Health Check] PLC: True, Realtime: True, Uptime: 362s
2025-09-20 18:28:25,607 - machine_control - INFO - Checking for existing pending commands...
2025-09-20 18:28:25,705 - machine_control - INFO - No pending commands found
