{"timestamp": "2025-09-20T14:46:55.144408", "agent_id": "investigator-144213-185b2c", "finding_type": "insight", "severity": "high", "message": "PLC connectivity is abstracted via PLCManager (singleton) -> PLCFactory -> RealPLC/SimulationPLC. RealPLC uses PLCCommunicator with three-level connection strategy (hostname, auto-discovery scan, static IP) and updates internal caches from Supabase. ConnectionMonitor continuously checks and attempts reconnection with capped retries, and writes a machine_health record.", "data": {"modules": ["src/plc/manager.py", "src/plc/factory.py", "src/plc/real_plc.py", "src/plc/simulation.py", "src/plc/communicator.py", "src/connection_monitor.py"], "status_fields": ["connected", "last_check", "last_connected", "reconnect_attempts", "error"], "discovery": ["hostname resolution", "quick network scan", "cached auto discovery"], "health_table": "machine_health"}}
{"timestamp": "2025-09-20T14:47:13.153433", "agent_id": "investigator-144213-185b2c", "finding_type": "issue", "severity": "medium", "message": "ContinuousDataRecorder records DB parameter snapshots but no built\u2011in PLC polling loop updates DB.current_value. RealPLC updates DB.current_value only when read_parameter() is called. Without a periodic reader, real-time charts rely on ad-hoc reads (e.g., UI) or step boundaries.", "data": {"files": ["src/recipe_flow/continuous_data_recorder.py", "src/recipe_flow/data_recorder.py", "src/plc/real_plc.py"], "implication": "Streamlit monitoring should either (a) run a lightweight polling loop for selected parameters, or (b) add a background service that updates current_value at N Hz."}}
{"timestamp": "2025-09-20T14:47:23.823429", "agent_id": "investigator-144213-185b2c", "finding_type": "issue", "severity": "low", "message": "ParameterControlListener\u2019s generic fallback uses plc_manager.write_parameter(parameter_name, value) but PLCManager.write_parameter expects a parameter_id. In RealPLC mode, if direct coil/register helpers are unavailable, this path likely fails unless parameter_name happens to equal the DB id.", "data": {"file": "src/parameter_control_listener.py", "lines_hint": "~415-470", "impact": "Streamlit parameter_control_ui commands may not work against RealPLC unless Simulation helpers exist or an id\u2192address mapping is provided."}}
