{"timestamp": "2025-09-20T19:23:59.194730", "agent_id": "investigator-192007-d616ca", "finding_type": "insight", "severity": "high", "message": "PLC simulation is controlled via env var PLC_TYPE in src/config.py (defaults to 'simulation').", "data": {"file": "src/config.py:61", "env_vars": ["PLC_TYPE", "PLC_IP", "PLC_PORT", "PLC_HOSTNAME", "PLC_AUTO_DISCOVER", "PLC_BYTE_ORDER"], "defaults": {"PLC_TYPE": "simulation", "PLC_IP": "192.168.1.100", "PLC_PORT": "502", "PLC_AUTO_DISCOVER": "false", "PLC_BYTE_ORDER": "badc"}}}
{"timestamp": "2025-09-20T19:24:13.191770", "agent_id": "investigator-192007-d616ca", "finding_type": "insight", "severity": "high", "message": "Mapped Supabase tables used by command/recipe/step execution with key fields.", "data": {"tables": {"recipe_commands": ["id", "machine_id", "type", "parameters", "status", "executed_at", "error_message", "created_at", "updated_at"], "recipes": ["id", "name", "version", "chamber_temperature_set_point", "pressure_set_point", "created_at", "updated_at"], "recipe_steps": ["id", "recipe_id", "name", "type", "sequence_number", "parent_step_id", "parameters", "created_at"], "loop_step_config": ["id", "step_id", "iteration_count"], "valve_step_config": ["id", "step_id", "valve_number", "duration_ms"], "purge_step_config": ["id", "step_id", "gas_type", "flow_rate", "duration_ms"], "process_executions": ["id", "machine_id", "operator_id", "session_id", "recipe_id", "recipe_version", "parameters", "status", "start_time", "end_time", "error_message", "created_at", "updated_at"], "process_execution_state": ["id", "execution_id", "last_updated", "progress", "current_step", "current_step_index", "current_step_name", "current_step_type", "current_overall_step", "total_overall_steps", "current_loop_count", "current_loop_iteration", "current_valve_number", "current_valve_duration_ms", "current_purge_duration_ms", "current_parameter_id", "current_parameter_value", "created_at"], "machines": ["id", "status", "current_process_id", "current_operator_id", "updated_at"], "machine_state": ["machine_id", "current_state", "state_since", "process_id", "is_failure_mode", "failure_component", "failure_description", "updated_at"], "parameter_control_commands": ["id", "machine_id", "parameter_name", "target_value", "timeout_ms", "executed_at", "completed_at", "error_message", "created_at"], "component_parameters": ["id", "component_id", "definition_id", "data_type", "current_value", "set_value", "min_value", "max_value", "is_writable", "read_modbus_address", "read_modbus_type", "write_modbus_address", "write_modbus_type", "created_at", "updated_at"], "process_data_points": ["process_id", "parameter_id", "value", "set_point", "timestamp"]}, "sources": ["src/command_flow/*", "src/recipe_flow/*", "src/step_flow/*", "docs/schema/schema_summary.md"]}}
{"timestamp": "2025-09-20T19:24:22.206849", "agent_id": "investigator-192007-d616ca", "finding_type": "insight", "severity": "high", "message": "Parameter control path confirmed: listener consumes parameter_control_commands with minimal fields.", "data": {"table": "parameter_control_commands", "pending_condition": "executed_at IS NULL", "claim_update": {"executed_at": "now()", "error_message": null}, "finalize_update": {"completed_at": "now()", "error_message": "<optional>"}, "required_fields_for_insert": ["machine_id", "parameter_name", "target_value"], "optional_fields": ["timeout_ms"], "example_insert": [{"machine_id": "<MACHINE_ID>", "parameter_name": "pump_1", "target_value": 1}, {"machine_id": "<MACHINE_ID>", "parameter_name": "mfc_1_flow_rate", "target_value": 150.5}], "code_refs": ["src/parameter_control_listener.py", "test_parameter_control.py", "docs/schema/schema_summary.md"]}}
