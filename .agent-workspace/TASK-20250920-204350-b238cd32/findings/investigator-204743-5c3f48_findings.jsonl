{"timestamp": "2025-09-20T20:49:56.858190", "agent_id": "investigator-204743-5c3f48", "finding_type": "insight", "severity": "medium", "message": "Root CLI supports forcing simulation and DEBUG via flags; downstream main starts command listener.", "data": {"cli_flags": {"--demo": {"maps_to": "PLC_TYPE=simulation", "ref": "main.py:25"}, "--plc": {"choices": ["simulation", "real"], "maps_to": "PLC_TYPE", "ref": "main.py:24"}, "--ip": {"maps_to": "PLC_IP", "default": "192.168.1.100", "refs": ["main.py:26", "src/config.py:64"]}, "--port": {"maps_to": "PLC_PORT", "default": 502, "refs": ["main.py:27", "src/config.py:65"]}, "--hostname": {"maps_to": "PLC_HOSTNAME", "ref": "main.py:28"}, "--auto-discover": {"maps_to": "PLC_AUTO_DISCOVER=true", "default": "false", "refs": ["main.py:29", "src/config.py:67"]}, "--byte-order": {"choices": ["abcd", "badc", "cdab", "dcba"], "maps_to": "PLC_BYTE_ORDER", "default": "badc", "refs": ["main.py:31", "src/config.py:71"]}, "--log-level": {"choices": ["CRITICAL", "ERROR", "WARNING", "INFO", "DEBUG"], "maps_to": "LOG_LEVEL", "default": "INFO if unset", "refs": ["main.py:32", "src/log_setup.py:18-28"]}, "--log-file": {"maps_to": "LOG_FILE", "default": "machine_control.log", "refs": ["main.py:34", "src/log_setup.py:51-55"]}, "--doctor": {"effect": "runs src.test_connections.run_connection_test() and exits", "refs": ["main.py:117-123"]}, "--monitor-interval": {"maps_to": "MONITOR_HEALTH_INTERVAL", "default": 30, "refs": ["main.py:38", "src/connection_monitor.py:40"]}, "--reconnect-delay": {"maps_to": "MONITOR_RECONNECT_DELAY", "default": 10, "refs": ["main.py:39", "src/connection_monitor.py:42"]}, "--max-reconnects": {"maps_to": "MONITOR_MAX_RECONNECTS", "default": 5, "refs": ["main.py:40", "src/connection_monitor.py:41"]}, "--reconnect-cooldown": {"maps_to": "MONITOR_RECONNECT_COOLDOWN", "default": 60, "refs": ["main.py:41", "src/connection_monitor.py:43"]}, "--health-update-interval": {"maps_to": "HEALTH_UPDATE_INTERVAL", "default": 60, "refs": ["main.py:42", "src/connection_monitor.py:44"]}, "--status-log-interval": {"maps_to": "STATUS_LOG_INTERVAL", "default": 300, "refs": ["main.py:43", "src/main.py:139-143"]}}, "downstream_startup": {"entry_call": "main.py:126-127", "invokes": "src.main.main", "ensures_listener": true, "evidence": ["src/main.py:113-121 starts agents incl. make_command_listener_agent(async_supabase)", "src/agents/supervisor.py:69-76 awaits setup_command_listener(async_supabase)", "src/command_flow/listener.py:83-90 subscribes to INSERT on public.recipe_commands"]}, "simulation_debug_run": {"recommended": "python main.py --demo --log-level DEBUG", "alternate": "python main.py --plc simulation --log-level DEBUG", "note": "Short 'sim' is not accepted; use 'simulation' or --demo."}}}
